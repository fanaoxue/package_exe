webpackJsonp([39],{EK6x:function(t,a,e){"use strict";e("4qDb");var o=e("iRBI"),i=(Array,Boolean,String,String,String,String,{name:"selectPopup",props:{arrayList:Array,inputShow:{type:Boolean,default:!1},inputPlaceholder:{type:String,default:"请输入车长"},inputUnit:{type:String,default:"米"},title:{type:String,default:""},BtnClassName:{type:String,default:""}},data:function(){return{active:-1,input:""}},methods:{cancel:function(){this.$emit("on-cancle")},submit:function(){if(-1===this.active){if(""===this.input)return Object(o.a)("请选择~~~","middle"),!1;if(!/^\d+(\.\d{1,2})?$/.test(this.input))return Object(o.a)("输入的不符合规则~~~","middle"),!1}var t=void 0;t=this.active>=0?this.arrayList[this.active].type:this.input+this.inputUnit,this.$emit("on-submit",t)}}}),n={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"toolbar"},[e("button",{staticClass:"cancel",attrs:{type:"button"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.title,expression:"title"}],staticClass:"title"},[t._v(t._s(t.title))]),t._v(" "),e("button",{staticClass:"confirm",attrs:{type:"button"},on:{click:t.submit}},[t._v("确认")])]),t._v(" "),e("div",{staticClass:"car_msg_choose",class:t.BtnClassName},t._l(t.arrayList,function(a,o,i){return e("div",{key:i,staticClass:"car_choose_btn",class:{"choose-btn-active":t.active===o},on:{click:function(a){t.active=o}}},[t._v(t._s(a.type))])}),0),t._v(" "),t.inputShow?e("div",{staticClass:"self_ipt"},[e("span",[t._v("其他：")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],attrs:{type:"number",placeholder:t.inputPlaceholder},domProps:{value:t.input},on:{click:function(a){t.active=-1},input:function(a){a.target.composing||(t.input=a.target.value)}}}),t._v(" "),e("span",[t._v(t._s(t.inputUnit))])]):t._e()])},staticRenderFns:[]};var r=e("C7Lr")(i,n,!1,function(t){e("ycsl")},"data-v-4175c5ea",null);a.a=r.exports},KyKp:function(t,a){},n4vr:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=e("ZLEe"),i=e.n(o),n=(e("MC7C"),e("WUel")),r=(e("Jg3o"),e("ziXK")),s=(e("F9qm"),e("F88D")),c=(e("Y8lH"),e("vEgV")),l=(e("U/pO"),e("/pvS")),d=(e("yg4I"),e("1Fu7")),u=(e("y8TG"),e("Xm+1")),m=(e("7ZMB"),e("k/cs")),p=e("EK6x"),h=e("yFUi"),y=e("3KrX"),v=e("KS8L"),f=(m.a,u.a,d.a,l.a,c.a,s.a,r.a,n.a,p.a,{name:"delivery_goods_first",data:function(){return{transportTemplateId:this.$route.query.transportTemplateId,goodsId:this.$route.query.goodsId,pageType:this.$route.query.pageType?this.$route.query.pageType:"0",citys:Object(h.a)(window.city.data),cityIdArr:"",startPlace:"",endPlace:"",formData:{loadingProvinceName:"",loadingCityName:"",loadingCountyName:"",unloadingProvinceName:"",unloadingCityName:"",unloadingCountyName:"",loadingProvinceId:"",loadingCityId:"",loadingCountyId:"",unloadingProvinceId:"",unloadingCityId:"",unloadingCountyId:"",goodsName:"",goodsAmount:"",goodsAmountType:"0",loadNumUnloadNum:"",cartLength:"",cartType:""},cartLengthShow:!1,cartTonnageShow:!1,moreCartTypeShow:!1,cartTypeActionsShow:!1,loadNumUnloadNumShow:!1,cartTypeActions:[{name:"厢式"},{name:"半挂"},{name:"高低板"},{name:"更多>>",fn:"showMoreCartType"}],cartTypeList:[{type:"平板"},{type:"低栏"},{type:"中栏"},{type:"高栏"},{type:"集装箱"},{type:"自卸"},{type:"开顶厢"},{type:"冷藏车"},{type:"危险品"},{type:"其他"}],cartLengthList:[{type:"4.2米"},{type:"6.8米"},{type:"8.7米"},{type:"9.6米"},{type:"13米"},{type:"17.5米"}],loadNumUnloadNumList:[{type:"一装一卸"},{type:"一装两卸"},{type:"两装一卸"},{type:"两装两卸"}]}},components:{vanNavBar:m.a,vanButton:u.a,vanCellGroup:d.a,vanField:l.a,vanRadio:c.a,vanRadioGroup:s.a,vanActionSheet:r.a,vanPopup:n.a,selectPopup:p.a},watch:{cityIdArr:function(){if(0!=this.cityIdArr.length)if(0==localStorage.getItem("types")){this.startPlace=this.getAddressName();var t=this.startPlace.split(" ");this.formData.loadingProvinceName=t[0],this.formData.loadingCityName=t[1],this.formData.loadingCountyName=t[2],this.formData.loadingProvinceId=this.cityIdArr[0],this.formData.loadingCityId=this.cityIdArr[1],this.formData.loadingCountyId=this.cityIdArr[2]}else{this.endPlace=this.getAddressName();var a=this.endPlace.split(" ");this.formData.unloadingProvinceName=a[0],this.formData.unloadingCityName=a[1],this.formData.unloadingCountyName=a[2],this.formData.unloadingProvinceId=this.cityIdArr[0],this.formData.unloadingCityId=this.cityIdArr[1],this.formData.unloadingCountyId=this.cityIdArr[2]}window.localStorage.clear()}},beforeRouteEnter:function(t,a,e){"chooseCity"===a.name?e(function(t){t.$store.commit("updateLoadingStatus",{isLoading:!1}),t.cityIdArr=JSON.parse(localStorage.getItem("cityIdArr"))}):"delivery_goods_success"===a.name?e(function(t){t.$store.commit("updateLoadingStatus",{isLoading:!1}),t.pageType="3"}):e(function(t){t.$store.commit("updateLoadingStatus",{isLoading:!1})})},mounted:function(){"1"===this.pageType?this.dataInit():"2"===this.pageType&&this._goodsResourceDetail()},methods:{onClickLeft:function(){Object(v.a)(-1)},dataInit:function(){var t=this;Object(y.d)({transportTemplateId:this.transportTemplateId}).then(function(a){if(0==a.data.reCode){var e=a.data.result;t.startPlace=e.loadingProvinceName+" "+e.loadingCityName+" "+e.loadingCountyName,t.endPlace=e.unloadingProvinceName+" "+e.unloadingCityName+" "+e.unloadingCountyName,i()(t.formData).forEach(function(a){t.formData[a]=e[a]});var o={type:"deliveryGoodsTemplete",updatMsg:e};t.$store.commit("updateDeliveryGoods",o)}else t.$vux.toast.text(a.data.reInfo,"middle")})},_goodsResourceDetail:function(){var t=this;Object(y.e)({goodsId:this.goodsId}).then(function(a){if(0==a.data.reCode){var e=a.data.result,o=e.loadingProvinceName,n=e.loadingCityName,r=e.loadingCountyName,s=e.unloadingProvinceName,c=e.unloadingCityName,l=e.unloadingCountyName;t.startPlace=r?o+" "+n+" "+r:o+" "+n,t.endPlace=l?s+" "+c+" "+l:s+" "+c,i()(t.formData).forEach(function(a){t.formData[a]=e[a]});var d={type:"deliveryGoodsAgain",updatMsg:e};t.$store.commit("updateDeliveryGoods",d)}else t.$vux.toast.text(a.data.reInfo,"middle")})},getAddressName:function(){return Object(h.d)(this.cityIdArr,this.citys)},isEmptyStr:function(t){return!(void 0!=t&&""!=t&&null!=t&&!/^[\s]*$/.test(t))},validator:function(){if(this.isEmptyStr(this.startPlace))return this.$vux.toast.text("装货地必填！","middle"),!1;if(this.isEmptyStr(this.endPlace))return this.$vux.toast.text("卸货地必填！","middle"),!1;if(this.isEmptyStr(this.formData.goodsName))return this.goodsName=this.formData.goodsName,this.$vux.toast.text("货物名称必填！","middle"),!1;if(this.isEmptyStr(this.formData.goodsAmount))return this.$vux.toast.text("货物数量必填！","middle"),!1;if(!/^([1-9]\d{0,6}|0)([\.]\d{0,4})?$/.test(this.formData.goodsAmount))return this.$vux.toast.text("无效的货物数量！","middle"),!1;if(this.isEmptyStr(this.formData.loadNumUnloadNum))return this.$vux.toast.text("请选择几装几卸","middle"),!1;if(this.isEmptyStr(this.formData.cartType))return this.$vux.toast.text("请选择车型","middle"),!1;if(this.isEmptyStr(this.formData.cartLength))return this.$vux.toast.text("请选择你需要的车长~~~","middle"),!1;return!!/^\d+(\.\d{1,2})?$/.test(this.formData.cartLength)||(this.$vux.toast.text("输入的车长不符合规则~~~","middle"),!1)},nextClick:function(){if(this.validator()){var t={type:"deliveryGoodsFirst",updatMsg:this.formData};this.$store.commit("updateDeliveryGoods",t),this.$router.push({path:"/delivery_goods_second",query:{transportTemplateId:this.transportTemplateId,pageType:this.pageType}})}},chooseStCity:function(t){this.$router.push({path:"/chooseCity",query:{type:t}})},onSelectCartType:function(t){t.fn?this[t.fn]():this.formData.cartType=t.name},showCartTypeActions:function(){this.cartTypeActionsShow=!0},showMoreCartType:function(){this.moreCartTypeShow=!0},showCartLength:function(){this.cartLengthShow=!0},submitMoreCartType:function(t){this.moreCartTypeShow=!1,this.formData.cartType=t},submitCartLength:function(t){this.cartLengthShow=!1,this.formData.cartLength=t.slice(0,t.length-1)},submitloadNumUnloadNum:function(t){this.loadNumUnloadNumShow=!1,this.formData.loadNumUnloadNum=t}}}),g={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"delivery_goods_first"},[e("c-header",{attrs:{isShowTitle:""}},[e("van-nav-bar",{attrs:{title:"发布货源","left-arrow":"",fixed:""},on:{"click-left":t.onClickLeft}})],1),t._v(" "),e("div",{staticClass:"sub_page_base"},[e("div",{staticClass:"gray"}),t._v(" "),e("div",{staticClass:"content"},[e("van-cell-group",[e("van-field",{attrs:{label:"装货地：",placeholder:"请选择装货地","right-icon":"arrow",required:"",readonly:""},on:{click:function(a){return t.chooseStCity(0)}},model:{value:t.startPlace,callback:function(a){t.startPlace=a},expression:"startPlace"}}),t._v(" "),e("van-field",{attrs:{label:"卸货地：",placeholder:"请选择卸货地","right-icon":"arrow",required:"",readonly:""},on:{click:function(a){return t.chooseStCity(1)}},model:{value:t.endPlace,callback:function(a){t.endPlace=a},expression:"endPlace"}}),t._v(" "),e("van-field",{attrs:{label:"货物名称：",placeholder:"请输入货物名称",required:"",clearable:""},model:{value:t.formData.goodsName,callback:function(a){t.$set(t.formData,"goodsName","string"==typeof a?a.trim():a)},expression:"formData.goodsName"}}),t._v(" "),e("van-field",{attrs:{label:"货物数量：",type:"number",placeholder:"请输入货物数量",required:"",clearable:""},model:{value:t.formData.goodsAmount,callback:function(a){t.$set(t.formData,"goodsAmount","string"==typeof a?a.trim():a)},expression:"formData.goodsAmount"}},[e("div",{attrs:{slot:"right-icon"},slot:"right-icon"},[e("van-radio-group",{staticClass:"goods-amount-type-box",model:{value:t.formData.goodsAmountType,callback:function(a){t.$set(t.formData,"goodsAmountType",a)},expression:"formData.goodsAmountType"}},[e("van-radio",{attrs:{name:"0"},scopedSlots:t._u([{key:"icon",fn:function(a){return e("div",{staticClass:"goods-amount-type-item",class:a.checked?"active":"inactive"},[t._v("吨")])}}])}),t._v(" "),e("van-radio",{attrs:{name:"1"},scopedSlots:t._u([{key:"icon",fn:function(a){return e("div",{staticClass:"goods-amount-type-item",class:a.checked?"active":"inactive"},[t._v("方")])}}])}),t._v(" "),e("van-radio",{attrs:{name:"2"},scopedSlots:t._u([{key:"icon",fn:function(a){return e("div",{staticClass:"goods-amount-type-item",class:a.checked?"active":"inactive"},[t._v("件")])}}])}),t._v(" "),e("van-radio",{attrs:{name:"3"},scopedSlots:t._u([{key:"icon",fn:function(a){return e("div",{staticClass:"goods-amount-type-item",class:a.checked?"active":"inactive"},[t._v("车")])}}])})],1)],1)]),t._v(" "),e("van-field",{attrs:{label:"几装几卸：",placeholder:"请选择","right-icon":"arrow",required:"",readonly:""},on:{click:function(a){t.loadNumUnloadNumShow=!0}},model:{value:t.formData.loadNumUnloadNum,callback:function(a){t.$set(t.formData,"loadNumUnloadNum",a)},expression:"formData.loadNumUnloadNum"}})],1),t._v(" "),e("div",{staticClass:"gray"}),t._v(" "),e("van-cell-group",[e("van-field",{attrs:{label:"车型：",placeholder:"请输入车型","right-icon":"arrow",readonly:"",required:""},on:{click:t.showCartTypeActions},model:{value:t.formData.cartType,callback:function(a){t.$set(t.formData,"cartType",a)},expression:"formData.cartType"}}),t._v(" "),e("van-field",{attrs:{label:"车长(米)：",placeholder:"请输入车长","right-icon":"arrow",readonly:"",required:""},on:{click:t.showCartLength},model:{value:t.formData.cartLength,callback:function(a){t.$set(t.formData,"cartLength",a)},expression:"formData.cartLength"}})],1)],1),t._v(" "),e("div",{staticClass:"footer"},[e("van-button",{attrs:{type:"primary",size:"large"},on:{click:function(a){return t.nextClick()}}},[t._v("下一步")])],1)]),t._v(" "),e("van-action-sheet",{attrs:{"close-on-click-action":"",actions:t.cartTypeActions},on:{select:t.onSelectCartType},model:{value:t.cartTypeActionsShow,callback:function(a){t.cartTypeActionsShow=a},expression:"cartTypeActionsShow"}}),t._v(" "),e("van-popup",{attrs:{position:"bottom",overlay:!0},model:{value:t.moreCartTypeShow,callback:function(a){t.moreCartTypeShow=a},expression:"moreCartTypeShow"}},[e("selectPopup",{attrs:{title:"更多车型",arrayList:t.cartTypeList},on:{"on-cancle":function(a){t.moreCartTypeShow=!1},"on-submit":t.submitMoreCartType}})],1),t._v(" "),e("van-popup",{attrs:{position:"bottom",overlay:!0},model:{value:t.cartLengthShow,callback:function(a){t.cartLengthShow=a},expression:"cartLengthShow"}},[e("selectPopup",{attrs:{arrayList:t.cartLengthList,inputShow:!0,title:"请选择车长(米)",inputUnit:"米",inputPlaceholder:"请输入车长"},on:{"on-cancle":function(a){t.cartLengthShow=!1},"on-submit":t.submitCartLength}})],1),t._v(" "),e("van-popup",{attrs:{position:"bottom",overlay:!0},model:{value:t.loadNumUnloadNumShow,callback:function(a){t.loadNumUnloadNumShow=a},expression:"loadNumUnloadNumShow"}},[e("selectPopup",{attrs:{arrayList:t.loadNumUnloadNumList,title:"几装几卸",BtnClassName:"car_msg_choose_2"},on:{"on-cancle":function(a){t.loadNumUnloadNumShow=!1},"on-submit":t.submitloadNumUnloadNum}})],1)],1)},staticRenderFns:[]};var C=e("C7Lr")(f,g,!1,function(t){e("KyKp")},"data-v-17965ff0",null);a.default=C.exports},ycsl:function(t,a){}});