webpackJsonp([64],{"6Ie/":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("aA9S"),s=e.n(i),o=(e("LJCJ"),e("OeHp")),n=(e("gja/"),e("O8Zg")),c=(e("GAmh"),e("NEbR")),l=(e("61El"),e("dbZm")),d=(e("7ZMB"),e("k/cs")),r=e("KS8L"),v=e("0Dnf"),g=e("3KrX"),u=(d.a,l.a,c.a,n.a,o.a,{components:{vanNavBar:d.a,vanTab:l.a,vanTabs:c.a,vanList:n.a,vanPullRefresh:o.a},data:function(){return{isFrom:this.$route.query.isFrom,cancelShow:!1,isLoading:!1,loading:!1,finished:!1,finishText:"",confirmData:{loadingProvinceName:"",loadingCityName:"",unloadingProvinceName:"",unloadingCityName:"",createdTime:"",cartLength:"",cartType:"",expectFreight:""},dataResult:{},total:{cartCount:"0",relevanceCartCount:"0",unRelevanceCartCount:"0"},totalData:[],active:this.$route.query.active||0,pageIdx:1,pageSize:30,goodsState:"0,1"}},beforeRouteEnter:function(t,a,e){Object(r.s)({isShow:"0"}),"delivery_goods_first"==a.name||"wayBillInfo"==a.name||"delivery_goods_success"==a.name?e(function(t){t.$store.commit("updateLoadingStatus",{isLoading:!1})}):"wayBillSuccess"!=a.name&&"deliveryDetail"!=a.name||e(function(t){console.log("回来了"),t.$store.commit("updateLoadingStatus",{isLoading:!1}),t.datdaInit(1)}),e()},mounted:function(){window.AppJSApi_finishCallBack1=this.onRefresh,this.datdaInit(1)},methods:{onClickLeft:function(){Object(r.a)(-1)},onRefresh:function(){console.log("触发刷新！!"),this.pageIdx=1,this.datdaInit(this.pageIdx)},onLoadMoreData:function(){var t=this;console.log("触发加载~~"),this.finished=!1,this.pageIdx++,Object(g.f)({pageIdx:this.pageIdx,pageSize:this.pageSize,goodsState:this.goodsState}).then(function(a){"0"==a.data.reCode?a.data.result.goodsList.length<30?(t.totalData=t.totalData.concat(a.data.result.goodsList),t.loading=!1,t.finished=!0,0===t.totalData.length?t.finishText="":t.finishText="没有更多了~~"):(t.totalData=t.totalData.concat(a.data.result.goodsList),t.loading=!1):t.$vux.toast.text(a.data.reInfo,"middle")})},datdaInit:function(t){var a=this;console.log("刷数据");var e={goodsState:0==this.active?"0,1":1==this.active?"2":this.goodsState,pageIdx:t,pageSize:this.pageSize};this.$store.commit("updateLoadingStatus",{isLoading:!0}),Object(g.f)(e).then(function(t){a.finished=!1,a.isLoading=!1,a.$store.commit("updateLoadingStatus",{isLoading:!1}),"0"===t.data.reCode?a.totalData=t.data.result.goodsList:a.$vux.toast.text(t.data.reInfo,"middle")})},checkTab:function(t){this.active=t,console.log(t),window.scrollTo(0,0),this.pageIdx=1,this.finished=!1,this.finishText="",this.goodsState=0==t?"0,1":1==t?"2":"3,4",this.datdaInit(1)},cancelSendGoods:function(t){s()(this.confirmData,t),this.cancelShow=!0},onConfirm:function(){var t=this,a={goodsId:this.confirmData.goodsId,userId:this.confirmData.userId,userName:this.confirmData.klbUserName,operatorRole:"0"};Object(g.b)(a).then(function(a){"0"==a.data.reCode?t.datdaInit(1):t.$vux.toast.text(a.data.reInfo,"middle")})},sendGoodsAgain:function(t){if(0===Object(r.v)())this.$router.push({path:"/delivery_goods_first",query:{goodsId:t.goodsId,pageType:"2"}});else{var a=v.a.APP_URL+"/delivery_goods_first?pageType=2&goodsId="+t.goodsId;Object(r.n)({url:a})}},waybillAgain:function(){},confirmBuildWaybill:function(t){if(0===Object(r.v)())this.$router.push({path:"/wayBillInfo",query:{goodsId:t.goodsId}});else{var a=v.a.APP_URL+"/wayBillInfo?goodsId="+t.goodsId;Object(r.n)({url:a})}},dialNumber:function(t){Object(r.c)(t)},gotoDetailPage:function(t){if(0===Object(r.v)())this.$router.push({path:"/deliveryDetail",query:{goodsId:t.goodsId}});else{var a=v.a.APP_URL+"/deliveryDetail?goodsId="+t.goodsId;Object(r.n)({url:a})}}}}),h={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"delivery-goods-record"},[i("c-header",{staticClass:"header",attrs:{isShowTitle:""}},[i("van-nav-bar",{attrs:{title:"发货记录","left-arrow":"",fixed:""},on:{"click-left":t.onClickLeft}})],1),t._v(" "),i("div",{staticClass:"sub_page_base"},[i("div",{staticClass:"header_tab"},[i("div",{staticClass:"tab-content"},[i("div",{class:{"tab tab-left selected-tab ":0===t.active,"tab tab-left":0!==t.active},on:{click:function(a){return t.checkTab(0)}}},[i("span",{class:{"num selected-tab":0===t.active,"num num-black":0!==t.active}},[t._v("匹配中")])]),t._v(" "),i("div"),t._v(" "),i("div",{class:{"tab selected-tab ":1===t.active,tab:1!==t.active},on:{click:function(a){return t.checkTab(1)}}},[2===t.active?i("div",{staticClass:"small-line-left"}):t._e(),t._v(" "),i("span",{class:{"num selected-tab":1===t.active,"num num-black":1!==t.active}},[t._v("已匹配")]),t._v(" "),0===t.active?i("div",{staticClass:"small-line-right"}):t._e()]),t._v(" "),i("div",{class:{"tab tab-right selected-tab ":2===t.active,"tab tab-right":2!==t.active},on:{click:function(a){return t.checkTab(2)}}},[i("span",{class:{"num selected-tab":2===t.active,"num num-black":2!==t.active}},[t._v("匹配记录")])])])]),t._v(" "),i("div",{staticClass:"content"},[i("van-tabs",{attrs:{animated:!0},model:{value:t.active,callback:function(a){t.active=a},expression:"active"}},t._l(3,function(t){return i("van-tab",{key:t,attrs:{title:""}})}),1),t._v(" "),i("div",{staticClass:"detail-list-cxt"},[i("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(a){t.isLoading=a},expression:"isLoading"}},[i("van-list",{attrs:{finished:t.finished,"finished-text":t.finishText,"immediate-check":!1},on:{load:t.onLoadMoreData},model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}},t._l(t.totalData,function(a,s){return i("div",{directives:[{name:"show",rawName:"v-show",value:0!=t.totalData.length,expression:"totalData.length !=0 "}],key:s,staticClass:"card",on:{click:function(e){return t.gotoDetailPage(a)}}},[i("div",{staticClass:"card-top vux-1px-b"},[i("div",{staticClass:"top-left"},[i("img",{staticClass:"dingwei",attrs:{src:e("e6cZ"),alt:"",width:"14"}}),t._v("\n                  "+t._s(a.loadingProvinceName+a.loadingCityName)+"\n                  "),i("img",{staticClass:"jiantou",attrs:{src:e("0QNk"),alt:"",width:"15"}}),t._v("\n                  "+t._s(a.unloadingProvinceName+a.unloadingCityName)+"\n                ")]),t._v(" "),i("div",{staticClass:"top-right",class:{yellow:0==a.goodsState||1==a.goodsState,blue:2==a.goodsState,green:3==a.goodsState,grey:4==a.goodsState}},[0==a.goodsState||1==a.goodsState?i("span",[t._v("匹配中")]):2==a.goodsState?i("span",[t._v("已匹配")]):3==a.goodsState?i("span",[t._v("已成交")]):i("span",[t._v("已取消")])])]),t._v(" "),i("div",{staticClass:"card-content"},[i("div",{staticClass:"content-list"},[i("div",{staticClass:"list-left"},[t._v("发布时间：")]),t._v(" "),i("div",{staticClass:"list-right"},[t._v(t._s(a.createdTime))])]),t._v(" "),i("div",{staticClass:"content-list"},[i("div",{staticClass:"list-left"},[t._v("车辆要求：")]),t._v(" "),i("div",{staticClass:"list-right"},[t._v(t._s(a.cartLength+"米 "+a.cartType))])]),t._v(" "),i("div",{staticClass:"content-list"},[i("div",{staticClass:"list-left"},[t._v("期望运费：")]),t._v(" "),i("div",{staticClass:"list-right"},[t._v(t._s(a.expectFreight)+"元")])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:a.driverName,expression:"item.driverName"}],staticClass:"content-list"},[i("div",{staticClass:"list-left"},[t._v("司机信息：")]),t._v(" "),i("div",{staticClass:"list-right"},[t._v("\n                    "+t._s(a.driverName+","+a.driverMobileNo)+"\n                    "),i("img",{attrs:{src:e("lhX/"),alt:"",width:"15px"},on:{click:function(e){return e.stopPropagation(),t.dialNumber(a.driverMobileNo)}}})])])]),t._v(" "),i("div",{staticClass:"card-footer vux-1px-t"},[i("x-button",{directives:[{name:"show",rawName:"v-show",value:0==a.goodsState||1==a.goodsState,expression:"item.goodsState == 0 ||  item.goodsState == 1"}],attrs:{type:"default"},nativeOn:{click:function(e){return e.stopPropagation(),t.cancelSendGoods(a)}}},[t._v("取消发货")]),t._v(" "),i("x-button",{directives:[{name:"show",rawName:"v-show",value:0==a.goodsState||1==a.goodsState||3==a.goodsState||4==a.goodsState,expression:"item.goodsState == 0 ||  item.goodsState == 1 || item.goodsState == 3 || item.goodsState == 4 "}],attrs:{type:"primary"},nativeOn:{click:function(e){return e.stopPropagation(),t.sendGoodsAgain(a)}}},[t._v("再发一单")]),t._v(" "),i("x-button",{directives:[{name:"show",rawName:"v-show",value:2==a.goodsState,expression:"item.goodsState == 2"}],attrs:{type:"default"},nativeOn:{click:function(e){return e.stopPropagation(),t.sendGoodsAgain(a)}}},[t._v("再发一单")]),t._v(" "),i("x-button",{directives:[{name:"show",rawName:"v-show",value:2==a.goodsState,expression:"item.goodsState == 2"}],attrs:{type:"primary"},nativeOn:{click:function(e){return e.stopPropagation(),t.confirmBuildWaybill(a)}}},[t._v("确认建单")])],1)])}),0)],1),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:0===t.totalData.length,expression:"totalData.length === 0 "}]},[t._m(0)])],1),t._v(" "),i("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[i("confirm",{attrs:{title:"取消发货",cancelText:"暂不取消",confirmText:"确认取消"},on:{"on-cancel":function(a){t.cancelShow=!1},"on-confirm":function(a){return t.onConfirm()}},model:{value:t.cancelShow,callback:function(a){t.cancelShow=a},expression:"cancelShow"}},[i("div",{staticClass:"card-box"},[i("div",{staticClass:"card-top"},[i("div",{staticClass:"top-left"},[i("img",{staticClass:"dingwei",attrs:{src:e("e6cZ"),alt:"",width:"14"}}),t._v("\n                "+t._s(t.confirmData.loadingProvinceName+t.confirmData.loadingCityName)+"\n                "),i("img",{staticClass:"jiantou",attrs:{src:e("0QNk"),alt:"",width:"15"}}),t._v("\n                "+t._s(t.confirmData.unloadingProvinceName+t.confirmData.unloadingCityName)+"\n              ")])]),t._v(" "),i("div",{staticClass:"card-content"},[i("div",{staticClass:"content-list"},[i("div",{staticClass:"list-left"},[t._v("发货时间：")]),t._v(" "),i("div",{staticClass:"list-right"},[t._v(t._s(t.confirmData.createdTime))])]),t._v(" "),i("div",{staticClass:"content-list"},[i("div",{staticClass:"list-left"},[t._v("车辆要求：")]),t._v(" "),i("div",{staticClass:"list-right"},[t._v(t._s(t.confirmData.cartLength+"米 "+t.confirmData.cartType))])]),t._v(" "),i("div",{staticClass:"content-list"},[i("div",{staticClass:"list-left"},[t._v("期望运费：")]),t._v(" "),i("div",{staticClass:"list-right"},[t._v(t._s(t.confirmData.expectFreight)+"元")])])])])])],1)],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"default",staticStyle:{"text-align":"center","margin-top":"4em"}},[a("p",[this._v("暂无数据~")])])}]};var f=e("C7Lr")(u,h,!1,function(t){e("HeY3")},null,null);a.default=f.exports},HeY3:function(t,a){}});