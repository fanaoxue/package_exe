webpackJsonp([41],{BnRF:function(t,i,e){"use strict";i.a=function(){return new s.a(function(t,i){if(window.AMap)t(window.AMap);else{var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://webapi.amap.com/maps?v=1.4.4&key=dcd4651c8b2e81e0818414f7b3b959cf&plugin=AMap.Geocoder&callback=initAMap",e.onerror=i,document.head.appendChild(e)}window.initAMap=function(){t(window.AMap)}})};var o=e("rVsN"),s=e.n(o)},NO5s:function(t,i){t.exports="data:image/png;base64,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"},WtxM:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=e("3cXf"),s=e.n(o),c=e("BnRF"),n=e("P9l9"),a=e("yFUi"),r=e("KS8L"),h={name:"cityChoose",data:function(){return{location:"定位中...",condition:"",cityList:[],show1:!1,dataShow:!0,usuallyShow:!0,searchShow:!0,citys:Object(a.a)(city.data),searchCity:Object(a.b)(city.data),searchCounty:Object(a.c)(city.data),searchCityVal:[],cityLists:[],activeKey:"",anchor:"A",countyState:!1,countyList:[],h:"0",i:"0",j:"",k:"",cityArr:[""],cityIdArr:[""],type:this.$route.query.type,dingweiState:!0,searchBarFixed:!1,clickFlag:"1",flag:""}},beforeRouteEnter:function(t,i,e){Object(r.s)({isShow:"1"}),e()},beforeRouteLeave:function(t,i,e){"delivery_goods_first"===t.name&&Object(r.s)({isShow:"0"}),1!=this.flag&&(this.cityIdArr=[]),localStorage.setItem("cityIdArr",s()(this.cityIdArr)),localStorage.setItem("types",this.type),e()},watch:{condition:function(){var t=this,i=null;if(i&&clearTimeout(this.timer),""!=this.condition)return this.dataShow=!0,this.searchShow=!1,i=setTimeout(function(){t.searchCityVal=[];var i=[];t.searchCounty.forEach(function(e){(e.py.indexOf(t.condition)>-1||e.name.indexOf(t.condition)>-1)&&i.push(e)}),t.searchCityVal=i},100),!1;this.dataShow=!1,this.searchShow=!0},cityIdArr:function(){if("0"==this.cityIdArr.length)return this.show1=!1,void(this.usuallyShow=!0);this.show1=!0,this.usuallyShow=!1}},created:function(){},mounted:function(){var t=this;this.$nextTick(function(){var i=t.type;Object(n.v)(i).then(function(i){t.$store.commit("updateLoadingStatus",{isLoading:!1}),"0"===i.data.reCode?t.cityList=i.data.result.placeList:t.$vux.toast.text(i.data.reInfo,"middle")}).catch(function(i){t.$store.commit("updateLoadingStatus",{isLoading:!1}),console.log(s()(i))})}),2==Object(r.v)()&&0==this.type&&window.webkit.messageHandlers.isOpenLocationPermission.postMessage(""),Object(c.a)().then(function(i){console.log("地图加载成功"),t.gaodeGps()}).catch(function(t){console.log("地图加载失败",t)}),window.addEventListener("scroll",this.handleScroll)},computed:{cityListData:function(){var t={},i=[];this.searchCity.map(function(e){if(e.py){var o=e.py.charAt(0).toUpperCase();(i=t[o]||[]).push({airportCode:e.py,airportName:e.name}),t[o]=i}});var e=[];for(var o in t)e.push({ckey:o,cityList:t[o]});return e=e.sort(function(t,i){return t.ckey.charCodeAt(0)-i.ckey.charCodeAt(0)})},cityListKey:function(){var t=[];return this.cityListData.map(function(i){t.push(i.ckey)}),t}},methods:{handleScroll:function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,i=void 0;i=1==this.usuallyShow?240:120,this.searchBarFixed=t>i},gaodeGps:function(){if(this.location="定位中...",0==this.type){var t,i,e=function(i){var e=["定位成功"];e.push("经度："+i.position.getLng()),e.push("纬度："+i.position.getLat()),c=[i.position.getLng(),i.position.getLat()];var o=new AMap.Geocoder({city:"010"});new AMap.Marker({map:t,bubble:!0}).setPosition(c),o.getAddress(c,function(t,i){if("complete"==t){var e=i.regeocode.addressComponent.citycode,o=i.regeocode.addressComponent.city,c="";o?(c=o,s.location=c+","+i.regeocode.addressComponent.district):["010","022","021","023","1852","1853"].includes(e.toString())?(c=i.regeocode.addressComponent.province,s.location=c+","+i.regeocode.addressComponent.district):(c="",s.location=i.regeocode.addressComponent.district)}})},o=function(t){s.location="定位失败"},s=this,c=[];(t=new AMap.Map("container",{resizeEnable:!0})).plugin(["AMap.Geolocation","AMap.Geocoder"],function(){i=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,buttonOffset:new AMap.Pixel(10,20),zoomToAccuracy:!0,buttonPosition:"RB"}),t.addControl(i),i.getCurrentPosition(),AMap.event.addListener(i,"complete",e),AMap.event.addListener(i,"error",o)})}},dingweiCity:function(){if("定位失败"!=this.location&&"定位中..."!=this.location){var t=void 0,i=void 0,e=void 0,o=this.location.split(",")[0],s=o.substr(0,o.length-1),c=this.location.split(",")[1];this.citys.forEach(function(e){e.name==s&&(t=e.parent,i=e.value)}),this.citys.forEach(function(t){t.name==c&&(e=t.value)}),this.cityIdArr[0]=t,this.cityIdArr[1]=i,this.cityIdArr[2]=e,this.flag=1,this.$router.go(-1)}else{if("定位中..."==this.location)return;this.$vux.toast.text("重新定位中...","middle"),this.gaodeGps()}},chooseCity:function(t){this.cityArr=[""],this.cityIdArr=[""],this.cityArr.push(this.cityList[t].cityPlace,this.cityList[t].countyPlace),this.cityIdArr.push(this.cityList[t].cityId,this.cityList[t].countyId),this.getProvince(this.cityList[t].cityPlace),this.show=!1,this.flag=1,this.$router.go(-1)},selectCity:function(t,i){this.condition=t.name,this.dataShow=!0;var e=t.name.split(" ");if(2==e.length){var o=e[0],s=e[1];this.getProvince(o);var c=void 0,n=void 0;this.citys.forEach(function(t){t.name==o&&(c=t.value),t.name==s&&(n=t.value)}),this.cityIdArr[1]=c,this.cityIdArr[2]=n}else{this.getProvince(e[0]);var a=void 0;this.citys.forEach(function(t){t.name==e[0]&&(a=t.value)}),this.cityIdArr[1]=a,this.cityIdArr[2]=""}this.$store.commit("updateLoadingStatus",{isLoading:!1}),this.flag=1,this.$router.go(-1)},checkCity:function(t,i){var e=this;this.j=i,this.k="",this.countyState=!0;var o=void 0;this.countyList=[],this.citys.forEach(function(i){i.name==t.airportName&&(o=i.value,i.parent)}),this.citys.forEach(function(t){t.parent==o&&e.countyList.push(t)}),this.getProvince(t.airportName);var s=void 0;this.citys.forEach(function(i){i.name==t.airportName&&(s=i.value)}),this.cityIdArr[1]=s,this.cityIdArr[2]=""},checkCounty:function(t,i){var e=this;this.k=i;var o=void 0;this.citys.forEach(function(t){t.value==e.cityIdArr[1]&&t.value}),this.citys.forEach(function(i){i.name==t.name&&(o=i.value)}),this.cityIdArr[2]=o},switchKey:function(t,i){var e=this;this.activeKey=t,this.j="",this.k="",this.i=i,this.anchor=t,this.countyList=[],this.cityIdArr=[],setTimeout(function(){e.activeKey=""},1e3)},cartTypeBtn:function(){1==this.show1&&(this.show=!1,this.flag=1,this.$router.go(-1))},getProvince:function(t){var i=void 0;this.citys.forEach(function(e){e.name==t&&(i=e.parent)}),this.cityIdArr.splice(0,1,i)},getCityId:function(t,i){var e=void 0,o=void 0;this.citys.forEach(function(i){i.name==t&&(e=i.value,i.parent)}),this.citys.forEach(function(t){t.parent==e&&t.name==i&&(o=t.value)}),this.cityIdArr[1]=e,this.cityIdArr[2]=o}},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)}},l={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{staticClass:"city-choose"},[o("group",[o("div",{staticClass:"search-ipt-cxt"},[o("div",{staticClass:"search-ipt-style"},[o("img",{attrs:{src:e("NO5s"),alt:""}}),t._v(" "),o("x-input",{attrs:{title:"",placeholder:"城市搜索"},model:{value:t.condition,callback:function(i){t.condition="string"==typeof i?i.trim():i},expression:"condition"}})],1)]),t._v(" "),o("div",{staticStyle:{padding:"0 22px"}},t._l(t.searchCityVal,function(i,e){return o("p",{directives:[{name:"show",rawName:"v-show",value:t.dataShow,expression:"dataShow"}],key:e,staticClass:"searchCity",class:e==t.h?"fontActive":"",staticStyle:{"border-bottom":"1px solid #DFDFDF",color:"#797979","text-indent":"1em","font-size":"15px",padding:"8px"},on:{click:function(o){return t.selectCity(i,e)}}},[t._v(t._s(i.name))])}),0)]),t._v(" "),o("div",{staticClass:"bg_ef"}),t._v(" "),o("div",{staticStyle:{display:"none"},attrs:{id:"container"}}),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.searchShow,expression:"searchShow"}]},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.usuallyShow,expression:"usuallyShow"}],staticClass:"address",staticStyle:{margin:"20px auto"}},[o("p",{staticStyle:{"margin-left":"2.4%","font-weight":"bold","margin-bottom":"6px"}},[t._v("定位/常用地址")]),t._v(" "),o("div",{staticClass:"car-msg-choose"},[o("div",{directives:[{name:"show",rawName:"v-show",value:0==t.type,expression:"type == 0"}],staticClass:"car-choose-btn",on:{click:function(i){return t.dingweiCity()}}},[o("img",{attrs:{src:e("e6cZ"),alt:"",width:"10",height:"15"}}),t._v("\n          "+t._s(t.location)+"\n        ")]),t._v(" "),t._l(t.cityList,function(i,e){return o("div",{key:e,staticClass:"car-choose-btn",on:{"~click":function(i){return t.chooseCity(e)}}},[t._v(t._s(i.cityPlace+i.countyPlace))])})],2)]),t._v(" "),o("div",{staticClass:"bg_ef"}),t._v(" "),o("div",{staticClass:"cityContent",staticStyle:{margin:"20px auto","min-height":"900px"}},[o("div",{staticClass:"city",staticStyle:{margin:"0 2.4%"}},[o("div",{staticClass:"city city-wap",staticStyle:{position:"relative"}},[o("div",{staticClass:"city-list"},[o("div",{staticClass:"block-60",class:1==t.searchBarFixed?"isFixed":""},[o("p",[t._v("请选择")]),t._v(" "),o("p",{class:1==t.show1?"fontActive1":"",staticStyle:{background:"#CFCFCF"},on:{click:function(i){return t.cartTypeBtn()}}},[t._v("确定")])]),t._v(" "),t._l(t.cityListData,function(i,e){return o("div",{key:e,staticClass:"clearfix",staticStyle:{position:"relative"}},[o("ul",{class:1==t.searchBarFixed?"istop":"",staticStyle:{left:"0px"}},t._l(i.cityList,function(e,s){return o("li",{directives:[{name:"show",rawName:"v-show",value:i.ckey==t.anchor,expression:"item.ckey == anchor"}],key:s,class:s===t.j?"fontActive":"",on:{click:function(i){return t.checkCity(e,s)}}},[t._v(t._s(e.airportName))])}),0)])})],2),t._v(" "),o("ul",{directives:[{name:"show",rawName:"v-show",value:t.countyState,expression:"countyState"}],staticStyle:{left:"200px"}},t._l(t.countyList,function(i,e){return o("li",{key:e,class:e===t.k?"fontActive":"",on:{click:function(o){return t.checkCounty(i,e)}}},[t._v(t._s(i.name))])}),0),t._v(" "),o("div",{staticClass:"filter"},t._l(t.cityListKey,function(i,e){return o("div",{key:e,class:e==t.i?"fontActive1":"",on:{click:function(o){return t.switchKey(i,e)}}},[t._v(t._s(i))])}),0),t._v(" "),t.activeKey?o("div",{staticClass:"active-key"},[t._v(t._s(t.activeKey))]):t._e()])])])])],1)},staticRenderFns:[]};var d=e("C7Lr")(h,l,!1,function(t){e("wPTy")},null,null);i.default=d.exports},wPTy:function(t,i){}});