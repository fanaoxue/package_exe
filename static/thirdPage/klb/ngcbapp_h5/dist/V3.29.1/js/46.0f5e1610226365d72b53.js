webpackJsonp([46],{"+EkU":function(t,e){},"H3y+":function(t,e){t.exports="data:image/png;base64,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"},wNow:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("IHPB"),o=i.n(a),s=i("3cXf"),n=i.n(s),l=(i("gja/"),i("O8Zg")),r=(i("GAmh"),i("NEbR")),c=(i("61El"),i("dbZm")),d=(i("7ZMB"),i("k/cs")),v=i("KS8L"),u=i("kROa"),h=(d.a,c.a,r.a,l.a,{data:function(){return{isLoginUser:this.$route.query.isLoginUser,headTitle:void 0!==this.$route.query.headTitle?decodeURIComponent(decodeURIComponent(this.$route.query.headTitle))+"的运力":"我的运力",clientHeight:document.documentElement.clientHeight,active:0,total:{cartCount:"0",relevanceCartCount:"0",unRelevanceCartCount:"0"},listState:[{driverList:[],loading:!1,finished:!1,error:!1,finishedText:"",errorText:"请求失败，点击重新加载"},{driverList:[],loading:!1,finished:!1,error:!1,finishedText:"",errorText:"请求失败，点击重新加载"},{driverList:[],loading:!1,finished:!1,error:!1,finishedText:"",errorText:"请求失败，点击重新加载"}],showActionsheet:!1,menusActionsheet:{menu1:"去修改"},changeType:"1",chooseItem:{},scrollClass:"",scroll:0,showControl:[],suoying:""}},components:{vanNavBar:d.a,vanTab:c.a,vanTabs:r.a,vanList:l.a},beforeRouteEnter:function(t,e,i){i(function(t){t.$store.commit("updateLoadingStatus",{isLoading:!1}),"addTransport"==e.name?t.dataInit(t.active):t.scrollClass=""})},computed:{waitingFlag:function(){return this.$store.state.loading.isLoading}},mounted:function(){},methods:{check:function(t){if("0"!==this.isLoginUser){this.showActionsheet=!0,this.chooseItem=t}},menuCheck:function(t){if("cancel"!==t){var e=this,i=e.chooseItem;this.recordLogFuc("10",{changeType:e.changeType,isUpdate:"1",cartBadgeNo:i.cartBadgeNo,driverName:i.name,mobileNo:i.mobileNo,transportCapacityRecId:i.transportCapacityRecId}),setTimeout(function(){var t=i.cartBadgeNo;Object(u.b)(t).then(function(t){if("0"===t.data.reCode)if(e.changeType=JSON.parse(t.data.result).changeType.toString(),"1"===e.changeType)e.$vux.toast.text("此运力已存在申请支付的运单无法修改~","middle");else{e.scrollClass="list_"+i.transportCapacityRecId+"_"+e.active;try{var a;a=Number(document.getElementsByClassName(e.scrollClass)[0].offsetTop)-Number(document.getElementsByClassName("TCDetailList_"+e.active)[0].scrollTop)||0,e.scroll=a>0?a:0,console.log(e.scroll)}catch(t){}e.$router.push({name:"addTransport",query:{changeType:e.changeType,isUpdate:"1",cartBadgeNo:i.cartBadgeNo,driverName:i.name,mobileNo:i.mobileNo,transportCapacityRecId:i.transportCapacityRecId}})}else e.$vux.toast.text(t.data.reInfo,"middle")})},50)}},menuCancel:function(){},recordLogFuc:function(t,e){Object(u.f)(t,e).then(function(e){"0"!==e.data.reCode&&console.log("行为数据返回结果"+t+":"+n()(e))}).catch(function(t){console.log("行为数据异常:"+t)})},checkTab:function(t){this.showControl=[],this.active=t},dataInit:function(t){this.type=t;var e=this;e.listState[t].loading=!0,e.listState[t].finished=!1,e.listState[t].driverList=[],Object(u.c)(e.active,e.$route.query.managerId).then(function(i){if("0"!==i.data.reCode)return e.listState[t].error=!0,e.listState[t].loading=!1,void(e.listState[t].errorText=i.data.reInfo);var a=JSON.parse(i.data.result);e.total=a.total,e.listState[t].driverList=[].concat(o()(e.listState[t].driverList),o()(a.driverList)),e.$nextTick(function(){if(e.listState[t].loading=!1,e.scrollClass){try{var i=0;i=e.scrollClass?document.getElementsByClassName(e.scrollClass)[0].offsetTop:0,i=(i-=e.scroll)>0?i:0,document.getElementsByClassName("TCDetailList_"+e.active)[0].scroll(0,i)}catch(t){}e.scrollClass=""}}),e.listState[t].finished=!0,0===e.listState[t].driverList.length?e.listState[t].finishedText="暂无数据~~~":e.listState[t].finishedText="没有更多了~~~"}).catch(function(i){e.listState[t].loading=!1,e.listState[t].error=!0,e.listState[t].errorText="请求失败，点击重新加载"})},onClickLeft:function(){var t=Object(v.v)();Object(v.a)(),0===t&&this.$router.go(-1)},goTel:function(t,e){var i=Object(v.v)();this.recordLogFuc(7,{phoneNo:t}),1===i||2===i?this.$vux1.confirm.show({title:"提示",content:"姓名："+e+"<br/>电话："+t,confirmText:"确认拨打",cancelText:"取消",onConfirm:function(){Object(v.c)(t)}}):window.location.href="tel:"+t},showOrHide:function(t,e){this.showControl[t]?this.$set(this.showControl,t,0):this.$set(this.showControl,t,1)}}}),m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"detail",style:{height:t.clientHeight+"px"},attrs:{id:"detail"}},[a("c-header",{attrs:{isShowTitle:!0}},[a("van-nav-bar",{attrs:{title:t.headTitle,"left-arrow":"",fixed:!0},on:{"click-left":t.onClickLeft}})],1),t._v(" "),a("div",{staticStyle:{height:"46px"}}),t._v(" "),a("div",{staticClass:"tab-content"},[a("div",{class:{"tab tab-left selected-tab yellow":0===t.active,"tab tab-left":0!==t.active},on:{click:function(e){return t.checkTab(0)}}},[a("span",{class:{"num selected-tab":0===t.active,"num num-black":0!==t.active}},[t._v(t._s(t.total.cartCount))]),t._v(" "),a("span",[t._v("全部")])]),t._v(" "),a("div"),t._v(" "),a("div",{class:{"tab selected-tab yellow":1===t.active,tab:1!==t.active},on:{click:function(e){return t.checkTab(1)}}},[2===t.active?a("div",{staticClass:"small-line-left"}):t._e(),t._v(" "),a("span",{class:{"num selected-tab":1===t.active,"num num-black":1!==t.active}},[t._v(t._s(t.total.relevanceCartCount))]),t._v(" "),a("span",[t._v("已关联")]),t._v(" "),0===t.active?a("div",{staticClass:"small-line-right"}):t._e()]),t._v(" "),a("div",{class:{"tab tab-right selected-tab yellow":2===t.active,"tab tab-right":2!==t.active},on:{click:function(e){return t.checkTab(2)}}},[a("span",{class:{"num selected-tab":2===t.active,"num num-black":2!==t.active}},[t._v(t._s(t.total.unRelevanceCartCount))]),t._v(" "),a("span",[t._v("未关联")])])]),t._v(" "),a("van-tabs",{attrs:{animated:!0},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(3,function(e){return a("van-tab",{key:e,attrs:{title:""}},[a("div",{staticClass:"detail-list-cxt",class:"TCDetailList_"+[e-1],staticStyle:{overflow:"scroll","-webkit-overflow-scrolling":"touch"},style:{height:t.clientHeight-155+"px"}},[a("van-list",{attrs:{finished:t.listState[e-1].finished,error:t.listState[e-1].error,"error-text":t.listState[e-1].errorText,"finished-text":t.listState[e-1].finishedText},on:{"update:error":function(i){return t.$set(t.listState[e-1],"error",i)},load:function(i){return t.dataInit(e-1)}},model:{value:t.listState[e-1].loading,callback:function(i){t.$set(t.listState[e-1],"loading",i)},expression:"listState[xlIndex - 1].loading"}},t._l(t.listState[e-1].driverList,function(o,s){return a("div",{key:s,staticClass:"list van-hairline--bottom",class:"list_"+o.transportCapacityRecId+"_"+[e-1],on:{click:function(e){return t.check(o)}}},[null===o.headUrl||void 0===o.headUrl?a("div",{staticClass:"head-img default-head-div"},[t._v("\n                            "+t._s(t._f("formatDriverName")(o.name))+"\n                        ")]):t._e(),t._v(" "),null!==o.headUrl&&void 0!==o.headUrl?a("img",{staticClass:"head-img",attrs:{alt:"",src:o.headUrl}}):t._e(),t._v(" "),a("div",{class:{"driver-info":null!==o.mobileNo,"driver-info":void 0!==o.mobileNo,"driver-info2":null===o.mobileNo,"driver-info2":void 0===o.mobileNo}},[t._v("\n                            "+t._s(o.cartBadgeNo)+"\n                            "),a("br"),t._v("\n                            "+t._s(t._f("formatName20")(o.name))+"\n                            "),a("br"),t._v(" "),null!==o.mobileNo&&void 0!==o.mobileNo?a("span",{staticClass:"tel-num",on:{click:function(e){return e.stopPropagation(),t.goTel(o.mobileNo,o.name)}}},[t._v(t._s(o.mobileNo))]):t._e(),t._v(" "),null!==o.mobileNo&&void 0!==o.mobileNo?a("img",{staticClass:"phone-icon",attrs:{alt:"",src:i("H3y+")},on:{click:function(e){return e.stopPropagation(),t.goTel(o.mobileNo,o.name)}}}):t._e()]),t._v(" "),a("span",{staticClass:"coop-total"},[t._v("合作"+t._s(o.waybillCount)+"单")]),t._v(" "),a("br"),t._v(" "),"0"===o.relCount?a("span",{staticClass:"state"},[t._v("未关联")]):t._e(),t._v(" "),"0"!==o.relCount?a("span",{staticClass:"state"},[t._v("已关联")]):t._e(),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0!==o.childList.length,expression:"item.childList.length !== 0"}],staticClass:"show-or-hide"},[a("span",{staticClass:"tab_col",on:{click:function(e){return e.stopPropagation(),t.showOrHide(s)}}},[a("span",[t._v("以往司机")]),t._v(" "),a("img",{staticClass:"img-icon imgStyle",class:{shouQi:0===t.showControl[s],zhanKai:1===t.showControl[s]},attrs:{src:i("tYQO"),alt:"",width:"15",height:"15"}})]),t._v(" "),a("transition",{attrs:{name:"mybox"}},[a("div",{staticClass:"slide",class:{animate:1===t.showControl[s]}},t._l(o.childList,function(e,o){return a("p",{key:o,staticClass:"oldDriver"},[a("span",[t._v(t._s(e.driverName))]),t._v(" "),null!==e.mobileNo&&void 0!==e.mobileNo?a("span",{staticClass:"tel-num",on:{click:function(i){return i.stopPropagation(),t.goTel(e.mobileNo,e.driverName)}}},[t._v(t._s(e.mobileNo)+"\n                                        ")]):t._e(),t._v(" "),a("span",[null!==e.mobileNo&&void 0!==e.mobileNo?a("img",{staticClass:"phone-icon",attrs:{alt:"",src:i("H3y+")},on:{click:function(i){return i.stopPropagation(),t.goTel(e.mobileNo,e.driverName)}}}):t._e()])])}),0)])],1)])}),0)],1)])}),1),t._v(" "),a("actionsheet",{attrs:{menus:t.menusActionsheet,"show-cancel":""},on:{"on-click-menu":t.menuCheck,"on-after-hide":t.menuCancel},model:{value:t.showActionsheet,callback:function(e){t.showActionsheet=e},expression:"showActionsheet"}})],1)},staticRenderFns:[]};var f=i("C7Lr")(h,m,!1,function(t){i("+EkU")},null,null);e.default=f.exports}});