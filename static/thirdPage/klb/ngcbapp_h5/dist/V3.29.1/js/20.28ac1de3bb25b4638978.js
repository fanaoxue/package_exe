webpackJsonp([20],{"+qtl":function(t,i){},GLE0:function(t,i,a){t.exports=a.p+"V3.29.1/img/yibangding_img@2x.fd3e17b.png"},I3sp:function(t,i,a){t.exports=a.p+"V3.29.1/img/youkajilu_icon@2x.c3fc263.png"},NO5s:function(t,i){t.exports="data:image/png;base64,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"},biZ0:function(t,i,a){t.exports=a.p+"V3.29.1/img/weibangding_img@2x.ebe4a17.png"},nM3T:function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=a("3cXf"),s=a.n(e),o=a("Hh+s"),n=a("KS8L"),r={name:"addOilCard",data:function(){return{show1:!1,show:!1,condition:"",belongActSys:this.$route.query.belongActSys,prepaymentsOilCard:this.$route.query.prepaymentsOilCard,cartBadgeNo:this.$route.query.cartBadgeNo,driverName:this.$route.query.driverName,mobileNo:this.$route.query.mobileNo,arrayList:[],searchList:[],oilName:"",cardNo:"",noInfo:!1,index:"",srcStatic:a("I3sp"),src1:a("biZ0"),src2:a("GLE0"),chooseOilCardItem:{}}},beforeRouteLeave:function(t,i,a){if(window.localStorage.setItem("cartBadgeNo",this.cartBadgeNo),window.localStorage.setItem("driverName",this.driverName),window.localStorage.setItem("mobileNo",this.mobileNo),"modifyWaybill"==t.name||"settlementInfo"==t.name||"wbsApplyPay"==t.name||"bigCompareModifyWaybill"==t.name){var e={type:"chooseOilCardItem",updatMsg:this.chooseOilCardItem};this.$store.commit("updateOildCardStatus",e)}a()},watch:{condition:function(){""==this.condition&&(this.searchList=[],this.noInfo=!1)}},mounted:function(){var t=this;this.$nextTick(function(){t.dataInit()})},methods:{phoneCall:function(t){t&&Object(n.c)(t)},dataInit:function(){var t=this;this.$store.commit("updateLoadingStatus",{isLoading:!0}),Object(o.c)(this.prepaymentsOilCard,this.cartBadgeNo,this.belongActSys).then(function(i){t.$store.commit("updateLoadingStatus",{isLoading:!1}),"0"===i.data.reCode?t.arrayList=i.data.result.list:t.$vux.alert.show({title:"提示",buttonText:"知道了",content:i.data.reInfo}),t.show1=!0}).catch(function(i){t.$store.commit("updateLoadingStatus",{isLoading:!1}),t.show1=!0,console.log(s()(i))})},bindCardConfirm:function(t,i,a,e){var s=this;"0"==e.isBind?this.$vux1.confirm.show({title:"确认绑定",content:'<div style="text-align:left;"><p style=\'color:#454545;line-height:150%;\'><span style="font-weight:bold;">'+i+"</span></br>卡号："+a+"</p><p style='color:#454545;line-height:150%;font-family:PingFang-SC-Medium;color:rgba(255,186,0,1);margin-top:4px;'>确认解除之前与\""+e.driverName+"，"+e.driverCarNo+'"的绑定关系？</p></div>',confirmText:"确认",cancelText:"取消",onConfirm:function(){s.bindCard(t,i,a,e)},onCancel:function(){}}):this.bindCard(t,i,a,e)},bindCard:function(t,i,a,e){try{MtaH5.clickStat("addoilcard_bind")}catch(t){s()(t)}this.index=t,this.oilName=i,this.cardNo=a,this.chooseOilCardItem=e,this.onConfirm(this.index)},searchBtn:function(){try{MtaH5.clickStat("addoilcard_search")}catch(t){s()(t)}if(""!=this.condition&&!/^[0-9]+$/.test(this.condition))return this.$vux.toast.text("请输入数字","middle"),!1;if(this.condition.length<4)return this.$vux.toast.text("请输入卡号最少后四位","middle"),!1;var t=[];for(var i in this.arrayList){var a=this.arrayList[i].oilCardNo;a.substring(a.length-this.condition.length)==this.condition&&t.push(this.arrayList[i])}this.searchList=[],this.searchList=t,0==this.searchList.length?this.noInfo=!0:this.noInfo=!1},onCancel:function(){this.show=!1},onConfirm:function(t){var i=this;try{MtaH5.clickStat("addoilcard_bind_ensure")}catch(t){s()(t)}var a=this.arrayList[t].oilCardNo;0!=this.searchList.length&&(a=this.searchList[t].oilCardNo),this.$store.commit("updateLoadingStatus",{isLoading:!0}),Object(o.a)(a,this.cartBadgeNo,this.driverName,this.mobileNo).then(function(t){if(i.$store.commit("updateLoadingStatus",{isLoading:!1}),i.$vux.toast.text(t.data.reInfo,"middle"),"0"!==t.data.reCode)return!1;setTimeout(function(){i.$router.go(-2),window.localStorage.setItem("oilCardNo",a)},1500)}).catch(function(t){i.$store.commit("updateLoadingStatus",{isLoading:!1}),console.log(s()(t))})}}},c={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"add-oil-card"},[e("c-header",[e("x-header",{attrs:{"left-options":{backText:""}}},[t._v("绑定油卡")])],1),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:1==t.show1,expression:"show1 == true"}]},[e("group",[e("div",{staticClass:"search-ipt-cxt"},[e("div",{staticClass:"search-ipt-style"},[e("img",{attrs:{src:a("NO5s"),alt:""}}),t._v(" "),e("x-input",{attrs:{title:"",placeholder:"请输入卡号后四位"},model:{value:t.condition,callback:function(i){t.condition=i},expression:"condition"}})],1),t._v(" "),e("div",{staticClass:"search-control-btn",on:{click:function(i){return t.searchBtn()}}},[t._v("搜索")])])]),t._v(" "),e("div",[e("div",{directives:[{name:"show",rawName:"v-show",value:0==t.arrayList.length,expression:"arrayList.length == 0"}],staticClass:"default"},[e("img",{attrs:{src:t.srcStatic,alt:"",width:"100"}}),t._v(" "),e("p",[t._v("当前企业无可用油卡记录！")]),t._v(" "),e("p",[t._v("请联系快路宝客服开卡")])])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!(0==t.arrayList.length&&0==t.searchList.length),expression:"!(arrayList.length == 0 && searchList.length == 0)"}],staticClass:"card"},[e("span",{directives:[{name:"show",rawName:"v-show",value:0!=t.arrayList.length&&0==t.searchList.length&&0==t.noInfo,expression:"arrayList.length != 0 && searchList.length == 0 && noInfo == false"}]},t._l(t.arrayList,function(i,s){return e("div",{key:s,staticClass:"card-box",class:"2"==i.oilBgType||"3"==i.oilBgType?"card2":"card1"},[e("div",{staticClass:"left"},[e("div",[t._v(t._s(i.oilTypeName))]),t._v(" "),e("div",{staticClass:"cardNum"},[t._v(t._s(i.oilCardNo))]),t._v(" "),e("p",{staticClass:"money"},[t._v("\n                            ￥"),e("span",[t._v(t._s(i.preOilBalance))]),t._v("余额\n                        ")]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"0"==i.isBind,expression:"item.isBind == '0'"}],staticClass:"info"},[e("div",[t._v("车牌号码："+t._s(i.driverCarNo))]),t._v(" "),e("div",[t._v("司机姓名："+t._s(i.driverName))]),t._v(" "),e("a",{staticClass:"phone-call",on:{click:function(a){return t.phoneCall(i.oilMobile)}}},[t._v("电话号码："+t._s(i.oilMobile)),e("img",{directives:[{name:"show",rawName:"v-show",value:i.oilMobile,expression:"item.oilMobile"}],attrs:{src:a("lhX/")}})])])]),t._v(" "),e("div",{staticClass:"right"},[e("x-button",{attrs:{type:"primary",mini:!0},nativeOn:{click:function(a){return t.bindCardConfirm(s,i.oilTypeName,i.oilCardNo,i)}}},[t._v("绑定")])],1),t._v(" "),e("img",{staticClass:"img",attrs:{src:["-1"==i.isBind?t.src1:t.src2],alt:""}})])}),0),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:0!=t.searchList.length,expression:"searchList.length != 0"}]},t._l(t.searchList,function(i,s){return e("div",{key:s,staticClass:"card-box",class:"2"==i.oilBgType||"3"==i.oilBgType?"card2":"card1"},[e("div",{staticClass:"left"},[e("div",[t._v(t._s(i.oilTypeName))]),t._v(" "),e("div",{staticClass:"cardNum"},[t._v(t._s(i.oilCardNo))]),t._v(" "),e("p",{staticClass:"money"},[t._v("\n                            ￥"),e("span",[t._v(t._s(i.preOilBalance))]),t._v("余额\n                        ")]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"0"==i.isBind,expression:"item.isBind == '0'"}]},[e("div",[t._v("车牌号码："+t._s(i.driverCarNo))]),t._v(" "),e("div",[t._v("司机姓名："+t._s(i.driverName))]),t._v(" "),e("a",{staticClass:"phone-call",on:{click:function(a){return t.phoneCall(i.oilMobile)}}},[t._v("电话号码："+t._s(i.oilMobile)),e("img",{directives:[{name:"show",rawName:"v-show",value:i.oilMobile,expression:"item.oilMobile"}],attrs:{src:a("lhX/")}})])])]),t._v(" "),e("div",{staticClass:"right"},[e("x-button",{attrs:{type:"primary",mini:!0},nativeOn:{click:function(a){return t.bindCardConfirm(s,i.oilTypeName,i.oilCardNo,i)}}},[t._v("绑定")])],1),t._v(" "),e("img",{staticClass:"img",attrs:{src:["-1"==i.isBind?t.src1:t.src2],alt:""}})])}),0),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:1==t.noInfo,expression:"noInfo == true"}]},[e("div",{staticClass:"default"},[e("img",{attrs:{src:t.srcStatic,alt:"",width:"100"}}),t._v(" "),e("p",[t._v("未搜索到匹配的油卡")])])])])],1)],1)},staticRenderFns:[]};var l=a("C7Lr")(r,c,!1,function(t){a("+qtl")},null,null);i.default=l.exports}});