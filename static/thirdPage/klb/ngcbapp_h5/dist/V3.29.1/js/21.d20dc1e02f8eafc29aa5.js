webpackJsonp([21],{EK6x:function(t,e,a){"use strict";a("4qDb");var i=a("iRBI"),o=(Array,Boolean,String,String,String,String,{name:"selectPopup",props:{arrayList:Array,inputShow:{type:Boolean,default:!1},inputPlaceholder:{type:String,default:"请输入车长"},inputUnit:{type:String,default:"米"},title:{type:String,default:""},BtnClassName:{type:String,default:""}},data:function(){return{active:-1,input:""}},methods:{cancel:function(){this.$emit("on-cancle")},submit:function(){if(-1===this.active){if(""===this.input)return Object(i.a)("请选择~~~","middle"),!1;if(!/^\d+(\.\d{1,2})?$/.test(this.input))return Object(i.a)("输入的不符合规则~~~","middle"),!1}var t=void 0;t=this.active>=0?this.arrayList[this.active].type:this.input+this.inputUnit,this.$emit("on-submit",t)}}}),n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"toolbar"},[a("button",{staticClass:"cancel",attrs:{type:"button"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.title,expression:"title"}],staticClass:"title"},[t._v(t._s(t.title))]),t._v(" "),a("button",{staticClass:"confirm",attrs:{type:"button"},on:{click:t.submit}},[t._v("确认")])]),t._v(" "),a("div",{staticClass:"car_msg_choose",class:t.BtnClassName},t._l(t.arrayList,function(e,i,o){return a("div",{key:o,staticClass:"car_choose_btn",class:{"choose-btn-active":t.active===i},on:{click:function(e){t.active=i}}},[t._v(t._s(e.type))])}),0),t._v(" "),t.inputShow?a("div",{staticClass:"self_ipt"},[a("span",[t._v("其他：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],attrs:{type:"number",placeholder:t.inputPlaceholder},domProps:{value:t.input},on:{click:function(e){t.active=-1},input:function(e){e.target.composing||(t.input=e.target.value)}}}),t._v(" "),a("span",[t._v(t._s(t.inputUnit))])]):t._e()])},staticRenderFns:[]};var s=a("C7Lr")(o,n,!1,function(t){a("ycsl")},"data-v-4175c5ea",null);e.a=s.exports},fk4P:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("aA9S"),o=a.n(i),n=a("rVsN"),s=a.n(n),c=a("ZLEe"),r=a.n(c),l=(a("IWOR"),a("13Ft")),u=(a("Cu5I"),a("111O")),d=(a("MC7C"),a("WUel")),p=(a("Jg3o"),a("ziXK")),h=(a("F9qm"),a("F88D")),v=(a("Y8lH"),a("vEgV")),m=(a("U/pO"),a("/pvS")),f=(a("yg4I"),a("1Fu7")),y=(a("y8TG"),a("Xm+1")),g=(a("7ZMB"),a("k/cs")),x=a("EK6x"),b=a("iobX"),_=a("3KrX"),D=a("P9l9"),C=(g.a,y.a,f.a,m.a,v.a,h.a,p.a,d.a,u.a,l.a,x.a,b.a,{name:"delivery_goods_second",data:function(){return{transportTemplateId:this.$route.query.transportTemplateId,pageType:this.$route.query.pageType?this.$route.query.pageType:"0",settleType:[],serviceRequire:[],formData:{loadingTime:"",expectFreight:"",settleType:"",isSupportTraffic:"",serviceRequire:"",specialExplain:""},selectDatePickerShow:!1,cartLengthShow:!1,cartTonnageShow:!1,moreCartTypeShow:!1,cartTypeActionsShow:!1,cartWhatShow:!1,cartTypeActions:[{name:"厢式"},{name:"半挂"},{name:"高低板"},{name:"更多>>",fn:"showMoreCartType"}],cartTypeList:[{type:"平板"},{type:"低栏"},{type:"中栏"},{type:"高栏"},{type:"集装箱"},{type:"自卸"},{type:"开顶厢"},{type:"冷藏车"},{type:"危险品"},{type:"其他"}],cartLengthList:[{type:"4.2米"},{type:"6.8米"},{type:"8.7米"},{type:"9.6米"},{type:"13米"},{type:"17.5米"}],cartWhatList:[{type:"一装一卸"},{type:"一装两卸"},{type:"两装一卸"},{type:"两装两卸"}],items3:["三不超","需雨布","急需走"]}},components:{vanNavBar:g.a,vanButton:y.a,vanCellGroup:f.a,vanField:m.a,vanRadio:v.a,vanRadioGroup:h.a,vanActionSheet:p.a,vanPopup:d.a,vanCheckbox:u.a,vanCheckboxGroup:l.a,selectPopup:x.a,datePicker:b.a},computed:{deliveryGoodsFirst:function(){return this.$store.state.deliveryGoods.deliveryGoodsFirst},deliveryGoodsTemplete:function(){return this.$store.state.deliveryGoods.deliveryGoodsTemplete},deliveryGoodsAgain:function(){return this.$store.state.deliveryGoods.deliveryGoodsAgain}},watch:{settleType:function(t){console.log(t),t&&(this.formData.settleType=t.toString())},serviceRequire:function(t){console.log(t),t&&(this.formData.serviceRequire=t.toString())}},beforeRouteEnter:function(t,e,a){a(function(t){t.$store.commit("updateLoadingStatus",{isLoading:!1})})},mounted:function(){"1"===this.pageType?this.dataInit():"2"===this.pageType&&this.GetDeliveryGoodsAgainData()},methods:{onClickLeft:function(){this.$router.back()},dataInit:function(){var t=this;r()(this.formData).forEach(function(e){t.formData[e]=t.deliveryGoodsTemplete[e]}),this.formData.isSupportTraffic=this.formData.supportTraffic||"",-1!=this.formData.serviceRequire.indexOf(",")?this.formData.serviceRequire.split(","):this.formData.serviceRequire},GetDeliveryGoodsAgainData:function(){var t=this;r()(this.formData).forEach(function(e){t.formData[e]=t.deliveryGoodsAgain[e]}),this.settleType=-1!=this.formData.settleType.indexOf(",")?this.formData.settleType.split(","):[this.formData.settleType],this.serviceRequire=-1!=this.formData.serviceRequire.indexOf(",")?this.formData.serviceRequire.split(","):[this.formData.serviceRequire]},isEmptyStr:function(t){return!(void 0!=t&&""!=t&&null!=t&&!/^[\s]*$/.test(t))},validator:function(){if(this.isEmptyStr(this.formData.loadingTime))return this.$vux.toast.text("请选择装货时间","middle"),!1;if(this.isEmptyStr(this.formData.expectFreight))return this.$vux.toast.text("期望运费必填！","middle"),!1;return/^([1-9]\d{0,6}|0)([\.]\d{0,2})?$/.test(this.formData.expectFreight)?0!==this.settleType.length||(this.$vux.toast.text("请选择结算方式","middle"),!1):(this.$vux.toast.text("期望运费不合法！","middle"),!1)},_getBaseInfo:function(){var t=this;return new s.a(function(e,a){t.$store.commit("updateLoadingStatus",{isLoading:!0}),Object(D.n)({}).then(function(i){t.$store.commit("updateLoadingStatus",{isLoading:!1}),0==i.data.reCode?e(i.data.result):(t.$vux.toast.text(i.data.reInfo,"middle"),a())}).catch(function(e){t.$vux.toast.text(e.message,"middle"),a()})})},goto:function(){var t=this;this.validator()&&this._getBaseInfo().then(function(e){t.$store.commit("updateLoadingStatus",{isLoading:!0});var a=o()({},t.formData,t.deliveryGoodsFirst,e);console.log(a),Object(_.h)(a).then(function(e){if(t.$store.commit("updateLoadingStatus",{isLoading:!1}),0==e.data.reCode){var a={type:"deliveryGoodsSecond",updatMsg:t.formData};t.$store.commit("updateDeliveryGoods",a),t._sendTransOrganizeMessages(),t.$router.push({path:"/delivery_goods_success"})}else t.$vux.toast.text(e.data.reInfo,"middle")})})},_sendTransOrganizeMessages:function(){return new s.a(function(t,e){Object(D.I)({}).then(function(a){0==a.data.reCode?t():e()}).catch(function(t){e()})})},onConfirmDatePicker:function(t){var e=t.text;t.code;this.selectDatePickerShow=!1,this.formData.loadingTime=e},onSelectCartType:function(t){t.fn?this[t.fn]():this.formData.cartType=t.name},showCartTypeActions:function(){this.cartTypeActionsShow=!0},showMoreCartType:function(){this.moreCartTypeShow=!0},showCartLength:function(){this.cartLengthShow=!0},submitMoreCartType:function(t){this.moreCartTypeShow=!1,this.formData.cartType=t},submitCartLength:function(t){this.cartLengthShow=!1,this.formData.cartLength=t},submitcartWhat:function(t){this.cartWhatShow=!1,this.formData.cartWhat=t}}}),S={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"delivery_goods_second"},[a("c-header",{attrs:{isShowTitle:""}},[a("van-nav-bar",{attrs:{title:"发布货源","left-arrow":"",fixed:""},on:{"click-left":t.onClickLeft}})],1),t._v(" "),a("div",{staticClass:"sub_page_base"},[a("div",{staticClass:"gray"}),t._v(" "),a("div",{staticClass:"content"},[a("van-cell-group",[a("van-field",{attrs:{label:"装货时间：",placeholder:"请选择装货时间","right-icon":"arrow",required:"",readonly:""},on:{click:function(e){t.selectDatePickerShow=!0}},model:{value:t.formData.loadingTime,callback:function(e){t.$set(t.formData,"loadingTime",e)},expression:"formData.loadingTime"}}),t._v(" "),a("van-field",{attrs:{type:"number",required:"",label:"期望运费：",placeholder:"请填写期望运费"},model:{value:t.formData.expectFreight,callback:function(e){t.$set(t.formData,"expectFreight",e)},expression:"formData.expectFreight"}},[a("div",{attrs:{slot:"right-icon"},slot:"right-icon"},[a("div",[t._v("元")])])]),t._v(" "),a("div",{staticClass:"cell"},[a("div",{staticClass:"label required"},[t._v("结算方式(多选)")]),t._v(" "),a("div",{staticClass:"checbox_group_box"},[a("van-checkbox-group",{staticClass:"checbox_group",model:{value:t.settleType,callback:function(e){t.settleType=e},expression:"settleType"}},[a("van-checkbox",{attrs:{name:"预付"},scopedSlots:t._u([{key:"icon",fn:function(e){return a("van-button",{staticClass:"btn",class:e.checked?"activeIcon":"inactiveIcon",attrs:{type:"primary",size:"large"}},[t._v("预付")])}}])}),t._v(" "),a("van-checkbox",{attrs:{name:"到付"},scopedSlots:t._u([{key:"icon",fn:function(e){return a("van-button",{staticClass:"btn",class:e.checked?"activeIcon":"inactiveIcon",attrs:{type:"primary",size:"large"}},[t._v("到付")])}}])}),t._v(" "),a("van-checkbox",{attrs:{name:"回单付"},scopedSlots:t._u([{key:"icon",fn:function(e){return a("van-button",{staticClass:"btn",class:e.checked?"activeIcon":"inactiveIcon",attrs:{type:"primary",size:"large"}},[t._v("回单付")])}}])})],1)],1)]),t._v(" "),a("div",{staticClass:"cell txz_box"},[a("div",{staticClass:"label"},[t._v("提供通行证：")]),t._v(" "),a("van-radio-group",{staticClass:"txz_group",model:{value:t.formData.isSupportTraffic,callback:function(e){t.$set(t.formData,"isSupportTraffic",e)},expression:"formData.isSupportTraffic"}},[a("van-radio",{attrs:{name:"1"}},[t._v("是")]),t._v(" "),a("van-radio",{attrs:{name:"0"}},[t._v("否")])],1)],1),t._v(" "),a("div",{staticClass:"cell"},[a("div",{staticClass:"label"},[t._v("服务要求(多选)")]),t._v(" "),a("div",{staticClass:"checbox_group_box"},[a("van-checkbox-group",{staticClass:"checbox_group",model:{value:t.serviceRequire,callback:function(e){t.serviceRequire=e},expression:"serviceRequire"}},[a("van-checkbox",{attrs:{name:"三不超"},scopedSlots:t._u([{key:"icon",fn:function(e){return a("van-button",{staticClass:"btn",class:e.checked?"activeIcon":"inactiveIcon",attrs:{type:"primary",size:"large"}},[t._v("三不超")])}}])}),t._v(" "),a("van-checkbox",{attrs:{name:"需雨布"},scopedSlots:t._u([{key:"icon",fn:function(e){return a("van-button",{staticClass:"btn",class:e.checked?"activeIcon":"inactiveIcon",attrs:{type:"primary",size:"large"}},[t._v("需雨布")])}}])}),t._v(" "),a("van-checkbox",{attrs:{name:"急需走"},scopedSlots:t._u([{key:"icon",fn:function(e){return a("van-button",{staticClass:"btn",class:e.checked?"activeIcon":"inactiveIcon",attrs:{type:"primary",size:"large"}},[t._v("急需走")])}}])})],1)],1)]),t._v(" "),a("div",{staticClass:"cell"},[a("div",{staticClass:"label"},[t._v("特殊说明：")]),t._v(" "),a("div",{staticClass:"checbox_group_box"},[a("van-field",{attrs:{rows:"2",autosize:"",type:"textarea",placeholder:"请填写特殊说明和运输要求~",clearable:"",maxlength:"64"},model:{value:t.formData.specialExplain,callback:function(e){t.$set(t.formData,"specialExplain",e)},expression:"formData.specialExplain"}})],1)])],1)],1),t._v(" "),a("div",{staticClass:"footer"},[a("van-button",{attrs:{type:"primary",size:"large"},on:{click:t.goto}},[t._v("确认发布")])],1)]),t._v(" "),a("van-popup",{attrs:{position:"bottom"},model:{value:t.selectDatePickerShow,callback:function(e){t.selectDatePickerShow=e},expression:"selectDatePickerShow"}},[a("datePicker",{on:{onConfirm:t.onConfirmDatePicker,onCancel:function(e){t.selectDatePickerShow=!1}}})],1),t._v(" "),a("van-action-sheet",{attrs:{"close-on-click-action":"",actions:t.cartTypeActions},on:{select:t.onSelectCartType},model:{value:t.cartTypeActionsShow,callback:function(e){t.cartTypeActionsShow=e},expression:"cartTypeActionsShow"}}),t._v(" "),a("van-popup",{attrs:{position:"bottom",overlay:!0},model:{value:t.moreCartTypeShow,callback:function(e){t.moreCartTypeShow=e},expression:"moreCartTypeShow"}},[a("selectPopup",{attrs:{title:"更多车型",arrayList:t.cartTypeList},on:{"on-cancle":function(e){t.moreCartTypeShow=!1},"on-submit":t.submitMoreCartType}})],1),t._v(" "),a("van-popup",{attrs:{position:"bottom",overlay:!0},model:{value:t.cartLengthShow,callback:function(e){t.cartLengthShow=e},expression:"cartLengthShow"}},[a("selectPopup",{attrs:{arrayList:t.cartLengthList,inputShow:!0,title:"请选择车长(米)",inputUnit:"米",inputPlaceholder:"请输入车长"},on:{"on-cancle":function(e){t.cartLengthShow=!1},"on-submit":t.submitCartLength}})],1),t._v(" "),a("van-popup",{attrs:{position:"bottom",overlay:!0},model:{value:t.cartWhatShow,callback:function(e){t.cartWhatShow=e},expression:"cartWhatShow"}},[a("selectPopup",{attrs:{arrayList:t.cartWhatList,title:"几装几卸",BtnClassName:"car_msg_choose_2"},on:{"on-cancle":function(e){t.cartWhatShow=!1},"on-submit":t.submitcartWhat}})],1)],1)},staticRenderFns:[]};var k=a("C7Lr")(C,S,!1,function(t){a("zwgj")},"data-v-8499a15a",null);e.default=k.exports},iobX:function(t,e,a){"use strict";a("4qDb");var i=a("iRBI"),o=a("lC5x"),n=a.n(o),s=a("J0Oq"),c=a.n(s),r=a("MgeX"),l=a.n(r),u=(a("bH+n"),a("gmkw")),d=(u.a,String,String,{name:"date_picker",components:{vanPicker:u.a},props:{startDate:{type:String,default:function(){return(new Date).toString()}},endDate:{type:String,default:"2022/01/01"}},data:function(){return{columns:[{values:"",className:"column1"},{values:"",className:"column2",defaultIndex:0},{values:"",className:"column3",defaultIndex:0},{values:"",className:"column4",defaultIndex:0}],cityDatas:"",showPicker:!1,data:{}}},created:function(){this.data=[{text:"全天",code:"0",child:[]},{text:"上午",code:"1",child:[{text:"6点",code:"6"},{text:"7点",code:"7"},{text:"8点",code:"8"},{text:"9点",code:"9"},{text:"10点",code:"10"},{text:"11点",code:"11"},{text:"12点",code:"12"}]},{text:"下午",code:"2",child:[{text:"13点",code:"13"},{text:"14点",code:"14"},{text:"15点",code:"15"},{text:"16点",code:"16"},{text:"17点",code:"17"},{text:"18点",code:"18"}]},{text:"晚上",code:"3",child:[{text:"19点",code:"19"},{text:"20点",code:"20"},{text:"21点",code:"21"},{text:"22点",code:"22"},{text:"23点",code:"23"},{text:"24点",code:"24"}]},{text:"凌晨",code:"4",child:[{text:"1点",code:"1"},{text:"2点",code:"2"},{text:"3点",code:"3"},{text:"4点",code:"4"},{text:"5点",code:"5"}]}];for(var t=new Date(this.startDate.replace(/-/g,"/")),e=new Date(this.endDate.replace(/-/g,"/")),a=[];e.getTime()-t.getTime()>=0;)a.push({submitText:this.getSubmitName(t),text:this.getDayName(t),code:this.getDayCode(t)}),t.setDate(t.getDate()+1);this.columns[0].values=a,this.columns[1].values=l()(this.data).map(function(t){return{text:t.text,code:t.code}}),this.columns[2].values=l()(this.data[0].child).map(function(t){return{text:t.text,code:t.code}}),this.columns[3].values=l()(this.data[0].child).map(function(t){return{text:t.text,code:t.code}})},mounted:function(){},methods:{getSubmitName:function(t){return t.getFullYear()+"年"+(t.getMonth()+1)+"月"+(1==t.getDate().toString().length?"0"+t.getDate():t.getDate())+"日"},getDayName:function(t){var e=new Date;e=new Date(e.getFullYear(),e.getMonth(),e.getDate());var a=((t=new Date(t.getFullYear(),t.getMonth(),t.getDate()))-e)/1e3/60/60/24;return 0==a?"今天":a<2?"明天":t.getMonth()+1+"月"+(1==t.getDate().toString().length?"0"+t.getDate():t.getDate())+"日"},getDayCode:function(t){return t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()},onChange:function(t,e,a){var i=this;return c()(n.a.mark(function o(){return n.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(1!==a){o.next=7;break}return o.next=3,t.setColumnValues(2,i.modifyData(i.data,e[1]));case 3:return o.next=5,t.setColumnValues(3,i.modifyData(i.data,e[1]));case 5:o.next=8;break;case 7:case 8:case"end":return o.stop()}},o,i)}))()},modifyData:function(t,e){var a=this;return t.forEach(function(t){t.code==e.code&&(a.cityDatas=t)}),l()(this.cityDatas.child).map(function(t){return{text:t.text,code:t.code}})},onConfirm:function(t,e){var a=void 0,o=void 0;if("0"===t[1].code)this.showPicker=!1,a=t[0].submitText+","+t[1].text,o=[t[0].code,t[1].code];else{if(Number(t[3].code)<Number(t[2].code))return void Object(i.a)("结束时间不能小于开始时间");this.showPicker=!1,a=t[0].submitText+","+t[1].text+","+t[2].text+"-"+t[3].text,o=t.map(function(t){return t.code})}this.$emit("onConfirm",{text:a,code:o,val:t,index:e})},onCancel:function(t,e){this.showPicker=!1,this.$emit("onCancel",t,e)}}}),p={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"date_picker"},[e("van-picker",{attrs:{"show-toolbar":"",title:"请选择装货时间","visible-item-count":3,columns:this.columns,"item-height":50},on:{cancel:this.onCancel,confirm:this.onConfirm,change:this.onChange}})],1)},staticRenderFns:[]};var h=a("C7Lr")(d,p,!1,function(t){a("jwBZ")},"data-v-adc81326",null);e.a=h.exports},jwBZ:function(t,e){},ycsl:function(t,e){},zwgj:function(t,e){}});