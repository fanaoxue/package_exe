(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05082c82"],{"00bb":function(a,n,e){},"0281":function(a,n,e){"use strict";var t=e("6e7e"),i=e.n(t);i.a},1529:function(a,n,e){"use strict";e.r(n);var t=function(){var a=this,n=a.$createElement,e=a._self._c||n;return e("div",{staticClass:"bind_card_index_box"},[e("v-header",{attrs:{title:"绑定银行卡",backFn:a.backHandle}}),e("div",{staticClass:"wrapper"},[e("van-notice-bar",{attrs:{color:"#E4322E",background:"#f5f5f5",scrollable:!1,wrapable:"",text:"请绑定您本人的银行卡，否则绑卡无效！"}},[e("van-icon",{attrs:{slot:"left-icon",name:"warning",color:"#E4322E"},slot:"left-icon"})],1),a.userName?e("van-cell-group",{staticClass:"mb10"},[e("van-cell",{attrs:{title:"姓名",value:a.userName}})],1):a._e(),e("van-cell-group",[e("van-field",{attrs:{clearable:"",placeholder:"请选择收款银行","input-align":"right",readonly:""},on:{click:a.selectBankList},model:{value:a.info.bankName,callback:function(n){a.$set(a.info,"bankName","string"===typeof n?n.trim():n)},expression:"info.bankName"}},[e("p",{attrs:{slot:"label"},slot:"label"},[e("span",{staticClass:"main_color"},[a._v("* ")]),a._v("收款银行\n        ")]),e("p",{attrs:{slot:"right-icon"},slot:"right-icon"},[e("van-icon",{attrs:{name:"arrow",color:"#C8C8CD"}})],1)]),e("van-field",{attrs:{clearable:"",placeholder:"请输入银行卡号",type:"tel","input-align":"right"},model:{value:a.info.bankCardNo,callback:function(n){a.$set(a.info,"bankCardNo","string"===typeof n?n.trim():n)},expression:"info.bankCardNo"}},[e("p",{attrs:{slot:"label"},slot:"label"},[e("span",{staticClass:"main_color"},[a._v("* ")]),a._v("银行卡号\n        ")])])],1)],1),e("div",{staticClass:"agreement"},[e("van-checkbox",{attrs:{"checked-color":"#E4322E"},model:{value:a.agree,callback:function(n){a.agree=n},expression:"agree"}},[a._v("本人已阅读并同意")]),e("span",{staticClass:"main_color",on:{click:a.checkProtocol}},[a._v("《订单账款管理服务合同》")])],1),e("div",{staticClass:"pub_fixed_btn"},[e("van-button",{staticClass:"item",attrs:{type:a.sendAbled?"primary":"danger"},on:{click:a.bindCard}},[a._v("提交")])],1),e("van-popup",{attrs:{position:"bottom"},model:{value:a.showUnionPicker,callback:function(n){a.showUnionPicker=n},expression:"showUnionPicker"}},[e("van-picker",{attrs:{"show-toolbar":"",columns:a.bankUnionList,"default-index":a.defaultIndex},on:{cancel:function(n){a.showUnionPicker=!1},confirm:a.onConfirmUnion}})],1),e("van-dialog",{staticClass:"abnormal_tell_alert",attrs:{title:"绑定失败！",confirmButtonText:"好的"},model:{value:a.abnormalForTell,callback:function(n){a.abnormalForTell=n},expression:"abnormalForTell"}},[e("p",{staticClass:"tip"},[a._v("系统异常，请重新绑定或联系客服处理!")]),e("div",[e("span",{staticClass:"tell_number main_color",on:{click:a.goCallPhone}},[a._v(a._s(a.serviceTellShow))])])]),e("alipay-proto-alert",{attrs:{earlyAlipayNotice:a.earlyAlipayNotice},on:{"update:earlyAlipayNotice":function(n){a.earlyAlipayNotice=n},"update:early-alipay-notice":function(n){a.earlyAlipayNotice=n},"on-comfirm-alipay":a.onConfirmAliPay}}),e("normal-alipay-alert",{attrs:{earlyAlipayNotice:a.noEarlyAlipay},on:{"update:earlyAlipayNotice":function(n){a.noEarlyAlipay=n},"update:early-alipay-notice":function(n){a.noEarlyAlipay=n},"on-comfirm-alipay":a.onConfirmAliPay}})],1)},i=[],o=(e("8e6e"),e("ac6a"),e("456d"),e("bd86")),r=(e("3c32"),e("417e")),c=(e("480b"),e("a37c")),l=e("4676"),s=e("22b6"),d=e("77ea"),u=e("646b"),f=e("2f14"),p=e("20c2"),b=function(){var a=this,n=a.$createElement,e=a._self._c||n;return e("div",{staticClass:"normal_alipay_alert_box"},[e("hyb-confirm",{staticClass:"alipay_notice",attrs:{iconClose:!0,confirmButtonText:"去确认",cancelButtonText:"暂不确认"},on:{"on-cancel":function(n){return a.onConfirmAliPay("cancel")},"on-confirm":a.onConfirmAliPay,"on-close":function(n){return a.onConfirmAliPay("cancel")}},model:{value:a.earlyAlipayNotice,callback:function(n){a.earlyAlipayNotice=n},expression:"earlyAlipayNotice"}},[e("p",{staticClass:"tip"},[a._v("路歌与支付宝强强联合，全力保障卡友的运费，请打开支付宝进行授权确认！")]),e("p",{staticClass:"notice_tip"},[e("span",{staticClass:"iconfont icon-kefu1"}),a._v("如有疑问，请联系\n      "),e("a",{staticClass:"tel main_color",on:{click:a.goCallPhone}},[a._v(a._s(a.serviceTellShow))])])])],1)},y=[],m={components:{},props:{earlyAlipayNotice:{type:Boolean,default:!1}},name:"normal_alipay_alert",data:function(){return{serviceTellShow:l["j"]}},watch:{},computed:{},methods:{onConfirmAliPay:function(a){this.$emit("on-comfirm-alipay",a)},goCallPhone:function(){Object(d["j"])(l["i"])}},created:function(){},mounted:function(){}},h=m,C=(e("0281"),e("2877")),k=Object(C["a"])(h,b,y,!1,null,"174af38b",null),_=k.exports;function N(a,n){var e=Object.keys(a);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(a);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(a,n).enumerable}))),e.push.apply(e,t)}return e}function v(a){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?N(Object(e),!0).forEach((function(n){Object(o["a"])(a,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(e)):N(Object(e)).forEach((function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(e,n))}))}return a}var g={name:"bind_card_index",components:{"van-notice-bar":c["a"],"van-checkbox":r["a"],AlipayProtoAlert:p["a"],NormalAlipayAlert:_},data:function(){return{fromType:this.$route.query.from_type||"-1",taxWaybillId:this.$route.query.tax_waybill_id||"",isPreCollect:this.$route.query.is_pre_collect||"",preCollectBind:this.$route.query.pre_collect_bind||"",collectType:this.$route.query.collect_type||"",userName:this.$route.query.user_name?decodeURI(this.$route.query.user_name):"",idCard:this.$route.query.id_card?decodeURI(this.$route.query.id_card):"",info:{bankName:"",bankCardNo:""},defaultIndex:0,bankUnionList:l["k"],serviceTellShow:l["j"],showUnionPicker:!1,abnormalForTell:!1,earlyAlipayNotice:!1,noEarlyAlipay:!1,alipayUrl:"",bankNextTip:"",isSendingBindWs:!1,isSendingCode:!1,isSendingEarly:!1,agree:!0}},computed:{sendAbled:function(){return this.info.bankName&&this.info.bankCardNo&&this.agree}},beforeRouteEnter:function(a,n,e){/bank_card_list/.test(n.name)?e((function(a){sessionStorage.getItem("bankName")&&(a.info.bankName=sessionStorage.getItem("bankName"))})):e((function(a){a.info.bankName="",a.info.bankCardNo="",a.init()}))},methods:{backHandle:function(){this.$dialog.close(),this.$router.back()},goCallPhone:function(){Object(d["j"])(l["i"])},checkProtocol:function(){window.location.href="".concat(l["l"],"#/order_account_protocol?&NEW_WVW")},selectBankList:function(){"1"!==this.info.thirdType?this.showUnionPicker=!0:this.$router.push("/bank_card_list")},onConfirmUnion:function(a,n){this.defaultIndex=n,this.info.bankName=a,this.showUnionPicker=!1},onConfirmAliPay:function(a){"cancel"!==a&&this.alipayUrl&&Object(d["p"])(this.alipayUrl),this.earlyAlipayNotice=!1,this.noEarlyAlipay=!1,this.cancelCall()},bindCard:function(){this.sendAbled&&("0"!==this.info.thirdType?"1"!==this.info.thirdType?this.$dialog.alert({title:" ",message:"没有钱包类型，司机未开通钱包",confirmButtonText:"好的"}):this.bindWsBankCardAction():Object(u["c"])(this))},bindWsBankCardAction:function(){var a=this;this.isSendingBindWs||(this.isSendingBindWs=!0,this.$toast.loading({message:"绑卡中"}),Object(s["a"])({sid:"1048007",data:{bankName:this.info.bankName,bankCardNo:this.info.bankCardNo,fromType:this.fromType,userName:this.userName,idCard:this.idCard,dcaUserAccount:this.info.dcaUserAccount},encrypt:"0"}).then((function(n){if("0"===n.data.reCode){var e=n.data.result;if(e.bindInfo&&(a.info.bankName=e.bankName,a.info.bankCardNo=e.bankCardNo,a.bankNextTip=e.bindInfo,a.$toast(e.bindInfo)),e.alipayUrl&&(a.alipayUrl=e.alipayUrl),"1"===a.isPreCollect)return void Object(u["b"])(e,a);if(e.alipayUrl)return void(a.noEarlyAlipay=!0);a.cancelCall()}else 4012===n.data.reCode?a.abnormalForTell=!0:4013===n.data.reCode&&a.$dialog.alert({title:"绑定失败！",message:n.data.reInfo,confirmButtonText:"好的"});a.isSendingBindWs=!1})).catch((function(){a.isSendingBindWs=!1})))},cancelCall:function(){var a=this;if("1"===this.preCollectBind)return this.bankNextTip||this.$toast("绑卡成功"),void setTimeout((function(){a.$router.back()}),200);"0"!==this.preCollectBind?this.bankNextTip?setTimeout((function(){Object(f["h"])("/bind_card_result?from_type=".concat(a.fromType,"&is_bind_info=").concat(!!a.bankNextTip),a)}),2e3):Object(f["h"])("/bind_card_result?from_type=".concat(this.fromType),this):Object(u["a"])(this)},init:function(){var a=this;this.$toast.loading({message:"加载中"}),Object(s["a"])({sid:"1048006",data:{fromType:this.fromType,userName:this.userName,idCard:this.idCard},encrypt:"0"}).then((function(n){if("0"===n.data.reCode){var e=n.data.result;a.info=v({},a.info,{},e),a.info.bankName="",a.info.bankCardNo="",e.userName&&(a.userName=e.userName),e.idCard&&(a.idCard=e.idCard),e.bankName&&e.bankCardNo&&a.$dialog.confirm({title:" ",message:"系统检测到您在路歌平台曾绑定过".concat(e.bankName,"（尾号").concat(e.bankCardNo.slice(-4),"）卡，请确认是否作为您的收款银行卡？"),confirmButtonText:"确认使用",cancelButtonText:"更换其他卡"}).then((function(){a.info.bankName=e.bankName,a.info.bankCardNo=e.bankCardNo,a.bankUnionList.indexOf(a.info.bankName)>-1&&(a.defaultIndex=a.bankUnionList.indexOf(a.info.bankName))}))}}))}},created:function(){window.AppJSApi_goBackJs=this.backHandle,Object(d["l"])({backJS:"javascript:AppJSApi_goBackJs()"})}},A=g,x=(e("ed68"),Object(C["a"])(A,t,i,!1,null,"627973ee",null));n["default"]=x.exports},"20c2":function(a,n,e){"use strict";var t=function(){var a=this,n=a.$createElement,e=a._self._c||n;return e("div",{staticClass:"alipay_proto_alert"},[e("hyb-confirm",{staticClass:"alipay_notice",attrs:{iconClose:!0,showCancelButton:!1,confirmButtonText:"去确认"},on:{"on-cancel":function(n){return a.onConfirmAliPay("cancel")},"on-confirm":a.onConfirmAliPay,"on-close":function(n){return a.onConfirmAliPay("cancel")}},model:{value:a.earlyAlipayNotice,callback:function(n){a.earlyAlipayNotice=n},expression:"earlyAlipayNotice"}},[e("p",{staticClass:"tip"},[a._v("路歌联合支付宝，全力保障卡友运费！确认授权后提前收款立即到账！")]),e("p",{staticClass:"notice_tip"},[e("span",{staticClass:"iconfont icon-kefu1"}),a._v("如有疑问，请联系\n      "),e("a",{staticClass:"tel main_color",on:{click:a.goCallPhone}},[a._v(a._s(a.serviceTellShow))])])])],1)},i=[],o=e("4676"),r=e("77ea"),c={components:{},props:{earlyAlipayNotice:{type:Boolean,default:!1}},name:"alipay_proto_alert",data:function(){return{serviceTellShow:o["j"]}},watch:{},computed:{},methods:{onConfirmAliPay:function(a){this.$emit("on-comfirm-alipay",a)},goCallPhone:function(){Object(r["j"])(o["i"])}},created:function(){},mounted:function(){}},l=c,s=(e("b6d2"),e("2877")),d=Object(s["a"])(l,t,i,!1,null,"0be5fd2c",null);n["a"]=d.exports},"646b":function(a,n,e){"use strict";e.d(n,"b",(function(){return o})),e.d(n,"a",(function(){return r})),e.d(n,"c",(function(){return c}));var t=e("4676"),i=e("22b6");function o(a,n,e){if(!n.alipayUrl)return"1"===n.preCollectBind?(a.bindInfo||n.$toast("绑卡成功"),void setTimeout((function(){e?window.history.go(-2):n.$router.back()}),200)):void("0"===n.preCollectBind&&r(n));n.earlyAlipayNotice=!0}function r(a){a.isSendingEarly||(a.isSendingEarly=!0,a.$toast.loading({message:"加载中"}),Object(i["a"])({sid:"893006",data:{taxWaybillId:a.taxWaybillId,payType:"1",bankName:a.info.bankName,bankCardNo:a.info.bankCardNo,collectType:a.collectType},encrypt:"0"}).then((function(n){a.isSendingEarly=!1,"0"===n.data.reCode&&("1"===n.data.result.hasAuth?window.location.href="".concat(t["g"],"#/join_bulletin?from_type=6&taxWaybill_id=").concat(a.taxWaybillId,"&collect_type=").concat(a.collectType):window.location.href="".concat(t["h"],"#/payment_result?from_type=").concat(a.fromType,"&tax_waybill_id=").concat(a.taxWaybillId,"&collect_type=").concat(a.collectType),sessionStorage.removeItem("union_bind_info"))})).catch((function(){a.isSendingEarly=!1})))}function c(a){a.isSendingCode||(a.isSendingCode=!0,a.$toast.loading({message:"发送中"}),Object(i["a"])({sid:"1048004",data:{bankName:a.info.bankName,bankCardNo:a.info.bankCardNo,fromType:a.fromType,userName:a.userName,idCard:a.idCard,dcaUserAccount:a.info.dcaUserAccount},encrypt:"0"}).then((function(n){if(a.isSendingCode=!1,"0"===n.data.reCode){var e=n.data.result,t={bankCardNo:a.info.bankCardNo,bankName:a.info.bankName,dcaBindCardId:e.dcaBindCardId,alipayUrl:e.alipayUrl,dcaUserAccount:a.info.dcaUserAccount,userName:a.userName,idCard:a.idCard};sessionStorage.setItem("union_bind_info",JSON.stringify(t)),a.$toast("发送成功"),a.$router.push("/bind_sms_validate?tax_waybill_id=".concat(a.taxWaybillId,"&from_type=").concat(a.fromType,"&is_pre_collect=").concat(a.isPreCollect,"&pre_collect_bind=").concat(a.preCollectBind,"&collect_type=").concat(a.collectType))}})).catch((function(){a.isSendingCode=!1})))}},"6e7e":function(a,n,e){},b6d2:function(a,n,e){"use strict";var t=e("bd83"),i=e.n(t);i.a},bd83:function(a,n,e){},ed68:function(a,n,e){"use strict";var t=e("00bb"),i=e.n(t);i.a}}]);