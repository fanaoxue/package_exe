(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f0d9077"],{"0da5":function(e,t,n){},"20c2":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"alipay_proto_alert"},[n("hyb-confirm",{staticClass:"alipay_notice",attrs:{iconClose:!0,showCancelButton:!1,confirmButtonText:"去确认"},on:{"on-cancel":function(t){return e.onConfirmAliPay("cancel")},"on-confirm":e.onConfirmAliPay,"on-close":function(t){return e.onConfirmAliPay("cancel")}},model:{value:e.earlyAlipayNotice,callback:function(t){e.earlyAlipayNotice=t},expression:"earlyAlipayNotice"}},[n("p",{staticClass:"tip"},[e._v("路歌联合支付宝，全力保障卡友运费！确认授权后提前收款立即到账！")]),n("p",{staticClass:"notice_tip"},[n("span",{staticClass:"iconfont icon-kefu1"}),e._v("如有疑问，请联系\n      "),n("a",{staticClass:"tel main_color",on:{click:e.goCallPhone}},[e._v(e._s(e.serviceTellShow))])])])],1)},a=[],o=n("4676"),c=n("77ea"),r={components:{},props:{earlyAlipayNotice:{type:Boolean,default:!1}},name:"alipay_proto_alert",data:function(){return{serviceTellShow:o["j"]}},watch:{},computed:{},methods:{onConfirmAliPay:function(e){this.$emit("on-comfirm-alipay",e)},goCallPhone:function(){Object(c["j"])(o["i"])}},created:function(){},mounted:function(){}},l=r,s=(n("b6d2"),n("2877")),d=Object(s["a"])(l,i,a,!1,null,"0be5fd2c",null);t["a"]=d.exports},"646b":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return r}));var i=n("4676"),a=n("22b6");function o(e,t,n){if(!t.alipayUrl)return"1"===t.preCollectBind?(e.bindInfo||t.$toast("绑卡成功"),void setTimeout((function(){n?window.history.go(-2):t.$router.back()}),200)):void("0"===t.preCollectBind&&c(t));t.earlyAlipayNotice=!0}function c(e){e.isSendingEarly||(e.isSendingEarly=!0,e.$toast.loading({message:"加载中"}),Object(a["a"])({sid:"893006",data:{taxWaybillId:e.taxWaybillId,payType:"1",bankName:e.info.bankName,bankCardNo:e.info.bankCardNo,collectType:e.collectType},encrypt:"0"}).then((function(t){e.isSendingEarly=!1,"0"===t.data.reCode&&("1"===t.data.result.hasAuth?window.location.href="".concat(i["g"],"#/join_bulletin?from_type=6&taxWaybill_id=").concat(e.taxWaybillId,"&collect_type=").concat(e.collectType):window.location.href="".concat(i["h"],"#/payment_result?from_type=").concat(e.fromType,"&tax_waybill_id=").concat(e.taxWaybillId,"&collect_type=").concat(e.collectType),sessionStorage.removeItem("union_bind_info"))})).catch((function(){e.isSendingEarly=!1})))}function r(e){e.isSendingCode||(e.isSendingCode=!0,e.$toast.loading({message:"发送中"}),Object(a["a"])({sid:"1048004",data:{bankName:e.info.bankName,bankCardNo:e.info.bankCardNo,fromType:e.fromType,userName:e.userName,idCard:e.idCard,dcaUserAccount:e.info.dcaUserAccount},encrypt:"0"}).then((function(t){if(e.isSendingCode=!1,"0"===t.data.reCode){var n=t.data.result,i={bankCardNo:e.info.bankCardNo,bankName:e.info.bankName,dcaBindCardId:n.dcaBindCardId,alipayUrl:n.alipayUrl,dcaUserAccount:e.info.dcaUserAccount,userName:e.userName,idCard:e.idCard};sessionStorage.setItem("union_bind_info",JSON.stringify(i)),e.$toast("发送成功"),e.$router.push("/bind_sms_validate?tax_waybill_id=".concat(e.taxWaybillId,"&from_type=").concat(e.fromType,"&is_pre_collect=").concat(e.isPreCollect,"&pre_collect_bind=").concat(e.preCollectBind,"&collect_type=").concat(e.collectType))}})).catch((function(){e.isSendingCode=!1})))}},b6d2:function(e,t,n){"use strict";var i=n("bd83"),a=n.n(i);a.a},bd83:function(e,t,n){},dc75:function(e,t,n){"use strict";var i=n("0da5"),a=n.n(i);a.a},f2ec:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bind_sms_validate_box"},[n("v-header",{attrs:{title:"验证手机号"}}),n("p",{staticClass:"label"},[e._v("请输入您的手机验证码")]),n("van-cell-group",[n("van-field",{attrs:{label:"手机号码",readonly:""},model:{value:e.mobileNo,callback:function(t){e.mobileNo="string"===typeof t?t.trim():t},expression:"mobileNo"}}),n("van-field",{staticClass:"sms_code",attrs:{label:"验证码",type:"tel",clearable:"",placeholder:"请输入短信验证码"},scopedSlots:e._u([{key:"button",fn:function(){return[n("van-button",{directives:[{name:"show",rawName:"v-show",value:e.second<=0,expression:"second <= 0"}],attrs:{size:"small"},on:{click:e.getCode}},[e._v("获取")]),n("van-button",{directives:[{name:"show",rawName:"v-show",value:e.second>0,expression:"second > 0"}],attrs:{size:"small"}},[e._v(e._s(e.second)+"秒")])]},proxy:!0}]),model:{value:e.verificationCode,callback:function(t){e.verificationCode="string"===typeof t?t.trim():t},expression:"verificationCode"}})],1),n("div",{staticClass:"pub_fixed_btn"},[n("van-button",{staticClass:"item",attrs:{type:e.sendAbled?"primary":"danger"},on:{click:e.nextStep}},[e._v("下一步")])],1),n("alipay-proto-alert",{attrs:{earlyAlipayNotice:e.earlyAlipayNotice},on:{"update:earlyAlipayNotice":function(t){e.earlyAlipayNotice=t},"update:early-alipay-notice":function(t){e.earlyAlipayNotice=t},"on-comfirm-alipay":e.onConfirmAliPay}})],1)},a=[],o=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),c=n("2f62"),r=n("22b6"),l=n("2f14"),s=n("77ea"),d=n("646b"),u=n("20c2");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y={components:{AlipayProtoAlert:u["a"]},name:"bind_sms_validate",data:function(){return{fromType:this.$route.query.from_type||"",taxWaybillId:this.$route.query.tax_waybill_id||"",isPreCollect:this.$route.query.is_pre_collect||"",preCollectBind:this.$route.query.pre_collect_bind||"",collectType:this.$route.query.collect_type||"",timmer:null,second:0,verificationCode:"",info:{},alipayUrl:"",earlyAlipayNotice:!1,isSendingCode:!1,isSendingEarly:!1,isSendingVerficat:!1}},watch:{second:function(e){e<=0&&(clearInterval(this.timer),this.timer=null)}},computed:p({},Object(c["b"])("user/",{userInfo:function(e){return e.userInfo}}),{mobileNo:function(){return this.userInfo.mobileNo?Object(l["d"])(this.userInfo.mobileNo):""},sendAbled:function(){return this.verificationCode&&this.info.dcaBindCardId},codeAbled:function(){return this.info.bankName&&this.info.bankCardNo&&this.info.dcaUserAccount}}),methods:{countDown:function(){var e=this;clearInterval(this.timer),this.timer=null,this.second=60,this.timer=setInterval((function(){e.second--}),1e3)},getCode:function(){var e=this;!this.isSendingCode&&this.codeAbled&&(this.isSendingCode=!0,this.$toast.loading({message:"发送中"}),Object(r["a"])({sid:"1048004",data:{bankName:this.info.bankName,bankCardNo:this.info.bankCardNo,fromType:this.fromType,userName:this.info.userName,idCard:this.info.idCard,dcaUserAccount:this.info.dcaUserAccount},encrypt:"0"}).then((function(t){if(e.isSendingCode=!1,"0"===t.data.reCode){var n=t.data.result;e.info.dcaBindCardId=n.dcaBindCardId,e.alipayUrl=n.alipayUrl,e.$toast("发送成功"),e.countDown()}})).catch((function(){e.isSendingCode=!1})))},nextStep:function(){var e=this;this.sendAbled&&!this.isSendingVerficat&&(this.isSendingVerficat=!0,this.$toast.loading({message:"提交中"}),Object(r["a"])({sid:"1048005",data:{dcaBindCardId:this.info.dcaBindCardId,verificationCode:this.verificationCode},encrypt:"0"}).then((function(t){if(e.isSendingVerficat=!1,"0"===t.data.reCode){if("1"===e.isPreCollect)return void Object(d["b"])({},e,"-2");Object(l["h"])("/bind_card_result?from_type=".concat(e.fromType),e)}})).catch((function(){e.isSendingVerficat=!1})))},onConfirmAliPay:function(e){"cancel"!==e&&this.alipayUrl&&Object(s["p"])(this.alipayUrl),this.earlyAlipayNotice=!1,this.cancelCall()},cancelCall:function(){var e=this;if("1"===this.preCollectBind)return this.$toast("绑卡成功"),void setTimeout((function(){e.$router.back()}),200);"0"!==this.preCollectBind?Object(l["h"])("/bind_card_result?from_type=".concat(this.fromType),this):Object(d["a"])(this)}},created:function(){if(sessionStorage.getItem("union_bind_info")){var e=JSON.parse(sessionStorage.getItem("union_bind_info"));this.info=e,this.alipayUrl=e.alipayUrl}this.countDown()}},b=y,m=(n("dc75"),n("2877")),h=Object(m["a"])(b,i,a,!1,null,"5ffe7575",null);t["default"]=h.exports}}]);