(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c960d7fe"],{"06ab":function(t,e,i){t.exports=i.p+"V1.1.01/img/sign_stamp.2263bcc0.gif"},"1d01":function(t,e){t.exports="data:image/png;base64,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"},2275:function(t,e,i){t.exports=i.p+"V1.1.01/img/sign_print.761e52aa.gif"},"38a8":function(t,e,i){t.exports=i.p+"V1.1.01/img/sign_arrow.c0a7d6e8.gif"},"5a9d":function(t,e,i){"use strict";var s=i("f2ae"),n=i.n(s);n.a},c159:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return"1"!==t.waybillFlag?s("div",{staticClass:"carriage_protocol_description_box"},[s("v-header",{attrs:{title:"运输协议说明",backFn:t.backHandle}}),t._m(0),t.isBound?s("div",{staticClass:"agreement",class:{center:"1"===t.isBound}},["0"===t.isBound?s("van-checkbox",{attrs:{"checked-color":"#E4322E"},model:{value:t.agree,callback:function(e){t.agree=e},expression:"agree"}},[t._v("本人同意以后同类型协议免验证码签署，")]):t._e(),s("span",{staticClass:"fl"},[t._v("查看")]),s("div",{staticClass:"agree_right"},[s("span",{staticClass:"red",on:{click:t.checkProtocol}},[t._v(t._s("0"===t.hasCollection?"《托运协议》":"《车辆运输协议》"))])])],1):t._e(),s("div",{staticClass:"sign_btn"},[s("p",{staticClass:"text"},[t._v("点击此处以签署")]),s("img",{directives:[{name:"show",rawName:"v-show",value:!t.printShow,expression:"!printShow"}],staticClass:"arrow",attrs:{src:i("38a8")}}),s("img",{directives:[{name:"show",rawName:"v-show",value:!t.printShow,expression:"!printShow"}],staticClass:"img",attrs:{src:i("1d01")},on:{touchstart:function(e){return e.preventDefault(),t.signStart(e)}}}),s("img",{directives:[{name:"show",rawName:"v-show",value:t.printShow,expression:"printShow"}],ref:"print",staticClass:"img",attrs:{src:i("2275")},on:{touchstart:function(t){t.preventDefault()}}}),s("img",{directives:[{name:"show",rawName:"v-show",value:t.stampShow,expression:"stampShow"}],ref:"stamp",staticClass:"stamp",attrs:{src:i("06ab")},on:{touchstart:function(t){t.preventDefault()}}}),s("p",{directives:[{name:"show",rawName:"v-show",value:t.nameShow,expression:"nameShow"}],staticClass:"name"},[t._v(t._s(t.templateValues.driverName1))])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.stampShow,expression:"stampShow"}],staticClass:"master"})],1):t._e()},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"content"},[t._v("\n    甲、乙双方本着平等公平、互惠互利的原则，在中华人民共和国法律、法规规定的范围内，在诚实守信、友好协商的基础上，达成货物运输长期合作伙伴关系。协议包括："),i("br"),t._v("\n    一、在合同期间，甲方为乙方提供相应的货源，运输价格在甲乙双方经协商同意后，乙方负责货物承运。"),i("br"),t._v("\n    二、乙方为甲方提供设备齐全、车况良好、运行安全可靠、证件齐全的车辆，为甲方完成货物运输任务。"),i("br"),t._v("\n    三、乙方在运输完成后需上传电子回单并将纸质单据完整、及时交付甲方，确保甲方及时审核回单支付运费给乙方。"),i("br"),t._v("\n    四、具体货物数量，运费结算方式等约定详见以下协议，本协议经乙方确认操作后生效。\n  ")])}],a=(i("8e6e"),i("ac6a"),i("456d"),i("bd86")),o=(i("3c32"),i("417e")),r=i("2f62"),c=i("2f14"),l=i("77ea"),u=i("22b6");function h(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function f(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?h(Object(i),!0).forEach((function(e){Object(a["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var d={name:"carriage_protocol_description",components:{"van-checkbox":o["a"]},data:function(){return{taxWaybillId:this.$route.query.tax_waybill_id||"",fromType:this.$route.query.from_type||"",waybillFlag:this.$route.query.waybill_flag||"",userName:this.$route.query.user_name||"",idCard:this.$route.query.id_card||"",agree:!0,isBound:"",hasCollection:"",printShow:!1,stampShow:!1,nameShow:!1,timer:null,resultInfo:{},templateValues:{},isSendingDirectly:!1,isSendingCode:!1}},computed:f({},Object(r["b"])("user/",{userInfo:function(t){return t.userInfo}}),{sendAbled:function(){var t=this.resultInfo&&this.resultInfo.orderNo&&!("0"===this.resultInfo.state||"1"===this.resultInfo.state&&"1"===this.isBound)&&this.userInfo.mobileNo;return"0"===this.isBound?t:t&&this.resultInfo.licenceNo}}),methods:{onReturnBack:function(){Object(l["d"])()},backHandle:function(){var t=this;this.$dialog.confirm({title:" ",message:"当前接单未完成，需签署协议以完成接单，是否仍退出当前步骤？",confirmButtonColor:"#999",cancelButtonColor:"#E4322E"}).then((function(){t.$router.back()})).catch((function(){}))},initEffect:function(){this.printShow=!1,this.stampShow=!1},startPrintEffect:function(){this.printShow=!0},startStampEffect:function(){var t=this;this.stampShow=!0,setTimeout((function(){t.nameShow=!0}),1250)},checkProtocol:function(){this.$router.push("/transport_protocol?is_bound=".concat(this.isBound,"&has_collection=").concat(this.hasCollection))},initGetProtoInfo:function(){var t=this;this.$toast.loading({message:"加载中..."}),Object(u["a"])({sid:"925013",data:{mobileNo:this.userInfo.mobileNo,realName:this.userName,idCard:this.idCard,waybillSignInfo:{taxWaybillId:this.taxWaybillId},fromSource:"0",signType:"2",fromType:this.fromType},encrypt:"0"}).then((function(e){"0"===e.data.reCode?(t.resultInfo=e.data.result,t.isBound=e.data.result.isBound,t.hasCollection=e.data.result.hasCollection,e.data.result.templateValues&&(sessionStorage.setItem("templateValues",e.data.result.templateValues),t.templateValues=JSON.parse(e.data.result.templateValues)),"0"===e.data.result.state?t.dialogTip("0"):"1"===t.isBound&&"1"===e.data.result.state&&t.dialogTip("1")):t.resultInfo={}}))},dialogTip:function(t){this.$dialog.alert({title:"提示",message:"0"===t?"协议已签署":"协议正在签署中"})},signStart:function(){"0"===this.resultInfo.state||"1"===this.resultInfo.state&&"1"===this.isBound?this.dialogTip(this.resultInfo.state):!this.printShow&&this.sendAbled&&(Object(l["c"])()&&Object(l["h"])(),Object(l["q"])()&&this.signPosition())},signPosition:function(t){var e=this;"0"===this.isBound?this.agree?(this.startPrintEffect(),this.timer=setTimeout((function(){e.timer=null,e.sendVerficatCode()}),1e3)):this.$dialog.alert({title:"提示",message:"为方便您的签署，请先同意以后免验证码签署"}):(this.startPrintEffect(),this.timer=setTimeout((function(){e.timer=null,e.isSendingDirectly||e.submitWaybill(t)}),1e3))},sendVerficatCode:function(){var t=this;this.isSendingCode||(this.isSendingCode=!0,this.$toast.loading({message:"加载中..."}),Object(u["a"])({sid:"925014",data:{mobileNo:this.userInfo.mobileNo,orderNo:this.resultInfo.orderNo,fromSource:"0"},encrypt:"0"}).then((function(e){"0"===e.data.reCode?(t.startStampEffect(),setTimeout((function(){t.$refs.stamp&&(t.isSendingCode=!1,t.$router.push("/sms_validate?mobile_no=".concat(t.userInfo.mobileNo,"&order_no=").concat(t.resultInfo.orderNo,"&from_type=").concat(t.fromType,"&tax_waybill_id=").concat(t.taxWaybillId,"&waybill_flag=").concat(t.waybillFlag)))}),2e3)):(t.isSendingCode=!1,t.initEffect())})).catch((function(){t.isSendingCode=!1,t.initEffect()})))},submitWaybill:function(t){var e=this;t=t?JSON.parse(decodeURI(t)):{},this.$toast.loading({message:"加载中..."}),this.isSendingDirectly=!0,Object(u["a"])({sid:"925016",data:{taxWaybillId:this.taxWaybillId,mobileNo:this.userInfo.mobileNo,orderNo:this.resultInfo.orderNo,templateValues:this.resultInfo.templateValues,licenceNo:this.resultInfo.licenceNo,fromSource:"0",signType:"2",locationInfo:t},encrypt:"0"}).then((function(i){"0"===i.data.reCode?(e.startStampEffect(),setTimeout((function(){e.$refs.stamp&&(sessionStorage.setItem("locationInfo",JSON.stringify(t)),Object(c["h"])("/order_success_transfter?from_type=".concat(e.fromType,"&tax_waybill_id=").concat(e.taxWaybillId,"&waybill_flag=").concat(e.waybillFlag),e))}),2e3)):(e.isSendingDirectly=!1,e.initEffect())})).catch((function(){e.isSendingDirectly=!1,e.initEffect()}))}},created:function(){"1"===this.waybillFlag?Object(c["h"])("/sf_protocol?from_type=".concat(this.fromType,"&tax_waybill_id=").concat(this.taxWaybillId,"&waybill_flag=").concat(this.waybillFlag),this):(this.initGetProtoInfo(),window.AppJSApi_BackAppNewLocation=this.signPosition)},mounted:function(){window.history&&window.history.pushState&&!Object(l["q"])()&&(window.history.pushState(null,null,document.URL),window.addEventListener("popstate",this.onReturnBack,!1))},destroyed:function(){window.removeEventListener("popstate",this.onReturnBack,!1)}},p=d,m=(i("5a9d"),i("2877")),w=Object(m["a"])(p,s,n,!1,null,"1cc919d9",null);e["default"]=w.exports},f2ae:function(t,e,i){}}]);