(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a504ebee"],{"16f3":function(t,e,i){},"5af9":function(t,e,i){"use strict";var o=i("16f3"),n=i.n(o);n.a},"9af1":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sms_validate_box"},[i("v-header",{attrs:{title:"短信验证",backFn:t.backHandle}}),i("div",{staticClass:"sms_validate"},[i("p",{staticClass:"label"},[t._v("短信验证码将发送至")]),i("p",{staticClass:"phone"},[t._v(t._s(t.mobile))]),i("div",{staticClass:"input_group"},[i("div",{staticClass:"input_content"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.smsCode,expression:"smsCode"}],ref:"input",staticClass:"group_left",attrs:{type:"tel",placeholder:"请输入6位验证码"},domProps:{value:t.smsCode},on:{input:[function(e){e.target.composing||(t.smsCode=e.target.value)},t.handleInput]}}),i("div",{staticClass:"btn"},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.second<=0,expression:"second <= 0"}],staticClass:"reset_btn",on:{click:t.resendCodeHandle}},[t._v("重新获取")]),i("span",{directives:[{name:"show",rawName:"v-show",value:t.second>0,expression:"second > 0"}],staticClass:"second"},[t._v(t._s(t.second)+"s")])])])])]),i("div",{staticClass:"footer"},[i("van-button",{attrs:{round:"",size:"large",type:t.smsCode&&6===t.smsCode.length?"primary":"danger"},on:{click:t.send}},[t._v("提交")])],1)],1)},n=[],s=i("2f14"),a=i("77ea"),c=i("22b6"),l={name:"sms_validate",data:function(){return{second:0,smsCode:"",timer:null,taxWaybillId:this.$route.query.tax_waybill_id||"",fromType:this.$route.query.from_type||"",waybillFlag:this.$route.query.waybill_flag||"",mobileNo:this.$route.query.mobile_no||"",orderNo:this.$route.query.order_no||"",locationInfo:{},locationFailInfo:{},isSendingCode:!1,isSendingVerficat:!1}},watch:{second:function(t){t<=0&&(clearInterval(this.timer),this.timer=null)},smsCode:function(t){6===t.length&&(this.$refs.input.blur(),this.send())}},computed:{mobile:function(){return Object(s["d"])(this.mobileNo)}},methods:{backHandle:function(){var t=this;this.$dialog.confirm({title:" ",message:"接单完成需填写验证码，是否继续填写？",confirmButtonColor:"#999",cancelButtonColor:"#b4001b"}).then((function(){})).catch((function(){t.$router.back()}))},handleInput:function(){this.smsCode.length>6&&(this.smsCode=this.smsCode.slice(0,6))},countDown:function(){var t=this;clearInterval(this.timer),this.timer=null,this.second=60,this.timer=setInterval((function(){t.second--}),1e3)},resendCodeHandle:function(){var t=this;this.isSendingCode||(this.isSendingCode=!0,this.$toast.loading({message:"发送中..."}),Object(c["a"])({sid:"925014",data:{mobileNo:this.mobileNo,orderNo:this.orderNo,fromSource:"0"},encrypt:"0"}).then((function(e){t.isSendingCode=!1,"0"===e.data.reCode&&(t.$toast("发送成功"),t.countDown())})).catch((function(){t.isSendingCode=!1})))},send:function(){this.smsCode&&6===this.smsCode.length&&(this.isSendingVerficat||this.verifyCodeHandle())},verifyCodeHandle:function(){var t=this,e={};"{}"!==JSON.stringify(this.locationInfo)?e=this.locationInfo:"{}"!==JSON.stringify(this.locationFailInfo)&&(e=this.locationFailInfo),this.$toast.loading({message:"正在提交中"}),this.isSendingVerficat=!0,Object(c["a"])({sid:"925015",data:{smsCode:this.smsCode,mobileNo:this.mobileNo,taxWaybillId:this.taxWaybillId,orderNo:this.orderNo,fromSource:"0",locationInfo:e},encrypt:"0"}).then((function(i){"0"===i.data.reCode?(sessionStorage.setItem("locationInfo",JSON.stringify(e)),Object(s["h"])("/order_success_transfter?from_type=".concat(t.fromType,"&tax_waybill_id=").concat(t.taxWaybillId,"&waybill_flag=").concat(t.waybillFlag),t)):t.isSendingVerficat=!1})).catch((function(){t.isSendingVerficat=!1}))},locationFail:function(t){t&&(this.locationFailInfo=JSON.parse(decodeURI(t)))},backAppNewLocation:function(t){t&&"{}"!==t&&(this.locationInfo=JSON.parse(decodeURI(t)))}},created:function(){this.countDown(),Object(a["h"])(),window.AppJSApi_BackAppNewLocation=this.backAppNewLocation,window.AppJSApi_BackLocationFailed=this.locationFail,window.AppJSApi_InitSendFlag=this.locationFail}},r=l,d=(i("5af9"),i("2877")),u=Object(d["a"])(r,o,n,!1,null,"bf631ee4",null);e["default"]=u.exports}}]);