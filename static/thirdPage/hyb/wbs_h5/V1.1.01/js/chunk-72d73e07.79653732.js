(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72d73e07"],{3846:function(t,i,e){e("9e1e")&&"g"!=/./g.flags&&e("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:e("0bfb")})},"6b54":function(t,i,e){"use strict";e("3846");var n=e("cb7c"),a=e("0bfb"),s=e("9e1e"),c="toString",o=/./[c],l=function(t){e("2aba")(RegExp.prototype,c,t,!0)};e("79e5")((function(){return"/a/b"!=o.call({source:"a",flags:"b"})}))?l((function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!s&&t instanceof RegExp?a.call(t):void 0)})):o.name!=c&&l((function(){return o.call(this)}))},"6bd1":function(t,i,e){},7764:function(t,i){t.exports="data:image/png;base64,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"},e046:function(t,i,e){"use strict";e.r(i);var n=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{staticClass:"receipt_page_box"},[n("v-header",{attrs:{title:t.titleText}}),"1"===t.info.canUploadHd?n("div",[n("div",{staticClass:"example"},[n("div",{staticClass:"line"}),n("p",{staticClass:"text"},[t._v("拍摄示例")]),n("div",{staticClass:"img_wrapper"},[n("div",{staticClass:"img",on:{click:function(i){return t.previewImg(0,"example")}}},[n("img",{attrs:{src:t.exampleImg}})]),n("div",{staticClass:"list"},[n("p",{staticClass:"item"},[n("van-icon",{attrs:{name:"checked",color:"#a4d178"}}),n("span",{staticClass:"label"},[t._v("保证光源充足")])],1),n("p",{staticClass:"item"},[n("van-icon",{attrs:{name:"checked",color:"#a4d178"}}),n("span",{staticClass:"label"},[t._v("回单拍摄完整清晰")])],1)])])]),n("div",{staticClass:"picture_container"},[n("div",{staticClass:"upload_wrapper",class:{no_img:0===t.receiptUrls.length}},[t._l(t.receiptUrls,(function(i,e){return n("div",{key:e,staticClass:"item"},[n("div",{staticClass:"img_wrapper",on:{click:function(i){return t.previewImg(e)}}},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:i,expression:"item"}],key:i,staticClass:"img"})]),n("div",{staticClass:"iconfont_wrapper",on:{click:function(i){return t.removeImg(e)}}},[n("van-icon",{attrs:{name:"clear"}})],1)])})),n("div",{directives:[{name:"show",rawName:"v-show",value:t.receiptUrls.length<t.imgCount,expression:"receiptUrls.length < imgCount"}],staticClass:"item",on:{click:t.addUploadImg}},[n("div",{staticClass:"img_wrapper upload_btn"})])],2),1===t.receiptUrls.length?n("div",{staticClass:"notice_text"},[n("p",{staticClass:"notice_item"},[t._v("已传完回单，请点击下方“确认提交”")]),n("p",{staticClass:"notice_item"},[t._v("如有多张回单，请继续上传哦~")])]):t._e()])]):t._e(),"0"!==t.info.canUploadHd||"1"!==t.info.canFinishOrder||t.receiptUrls.length?t._e():n("p",{staticClass:"pay_tip"},[t._v("企业已经确认支付完成，直接点击提交即可！")]),"1"===t.info.canUploadHd||"0"===t.info.canUploadHd&&"1"===t.info.canFinishOrder?n("div",{staticClass:"pub_fixed_btn"},[n("van-button",{staticClass:"item",attrs:{type:"primary"},on:{click:t.handleSend}},[t._v("确认提交")])],1):t._e(),"0"===t.info.canUploadHd?n("div",{staticClass:"preview_wrapper"},t._l(t.receiptUrls,(function(i,e){return n("div",{key:e,staticClass:"item",class:{one_img:1===t.receiptUrls.length}},[n("div",{staticClass:"img_wrapper",on:{click:function(i){return t.previewImg(e)}}},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:i,expression:"item"}],key:i})])])})),0):t._e(),"1"===t.showGuide?n("div",{staticClass:"guide_wrapper",on:{touchmove:function(t){t.preventDefault()},click:function(i){t.showGuide="0"}}},[n("img",{staticClass:"guide_img",attrs:{src:e("7764")}}),t._m(0),n("p",{staticClass:"guide_btn",on:{click:function(i){t.showGuide="0"}}},[t._v("我知道了")])]):t._e()],1)},a=[function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("p",{staticClass:"guide_text"},[t._v("现在上传回单开启你的第一次"),e("br"),t._v("提前收款服务体验吧！")])}],s=(e("6b54"),e("4676")),c=e("77ea"),o=e("2f14"),l=e("22b6"),r={name:"receipt_page",data:function(){return{oldVersion284:Object(o["a"])(Object(c["f"])(),"2.8.4"),fromType:this.$route.query.from_type,taxWaybillId:this.$route.query.tax_waybill_id,exampleImg:s["a"],receiptUrls:[],copyReceiptUrls:[],imgCount:20,showGuide:"0",hasNoHd:!1,isSending:!1,info:{},locationInfo:{},locationFailInfo:{},errFlag:!1}},computed:{titleText:function(){return"1"===this.info.canFinishOrder?"运输完成":"0"===this.info.canFinishOrder?"查看回单":""}},methods:{removeImg:function(t){this.receiptUrls.splice(t,1)},previewImg:function(t,i){var e="example"===i?this.exampleImg:this.receiptUrls.join(",");Object(c["q"])()&&"example"!==i&&(e=this.receiptUrls),Object(o["f"])(e,t)},receviveImgJson:function(t){var i=JSON.parse(t),e=i.imgData;this.receiptUrls=this.receiptUrls.concat(e)},addUploadImg:function(){var t=this.imgCount-this.receiptUrls.length;Object(c["i"])({cameraType:"7",num:t,fileType:"1",triggerType:"2",buriedPointType:"28",logExplain:"上传回单图片"})},locationFail:function(t){this.locationFailInfo=JSON.parse(decodeURI(t)),console.log("JS2006回调AppJSApi_BackLocationFailed/AppJSApi_InitSendFlag:".concat(t))},handleSend:function(){if(this.receiptUrls.length>20)this.$dialog.alert({message:"最多只能上传20张图片！"});else if("1"===this.info.canFinishOrder)if(this.oldVersion284){console.log("小于2.8.4版本1");var t=Object(c["e"])();Object(c["p"])()||this.sendAction(t)}else this.sendAction();else if("1"===this.info.canUploadHd){if(0===this.receiptUrls.length)return void this.$toast("请上传回单");this.oldVersion284&&this.copyReceiptUrls.toString()===this.receiptUrls.toString()?this.jumpPage():this.completeWaybillAction()}},sendAction:function(t){var i=this;"1"===this.info.canUploadHd&&0===this.receiptUrls.length?this.$dialog.confirm({title:" ",message:"1"===this.fromType?"请上传本趟运输的回单，才可获得元宝，是否仍然提交":"运输完成需上传回单，以保证您尽快结算运费，是否仍然提交",confirmButtonText:"去上传",cancelButtonText:"确认"}).then((function(){})).catch((function(){i.completeWaybill(t)})):(t=t?JSON.parse(decodeURI(t)):{},this.completeWaybillAction(t))},completeWaybill:function(t){if(this.oldVersion284){console.log("小于2.8.4版本2");var i=this.$toast.loading({message:"正在提交"});if(t){t=JSON.parse(decodeURI(t));var e=t.locationTime,n=(new Date).getTime(),a=n-e;a>6e5?(i.clear(),Object(c["h"])()):this.completeWaybillAction(t)}else{var s=Object(c["c"])();s?(t={},this.completeWaybillAction(t)):i.clear()}}else this.completeWaybillAction()},backAppNewLocation:function(t){var i=JSON.parse(decodeURI(t));this.oldVersion284?this.completeWaybillAction(i):"{}"!==t&&(this.locationInfo=i)},completeWaybillAction:function(t){var i=this;if(!this.isSending&&this.info.canFinishOrder){var e={};e=this.oldVersion284?t:"{}"!==JSON.stringify(this.locationInfo)?this.locationInfo:"{}"!==JSON.stringify(this.locationFailInfo)?this.locationFailInfo:{reInfo:"H5没收到客户端定位信息",locationTime:(new Date).getTime()},console.log("位置信息:",e),this.$toast.loading({message:"正在提交"}),this.isSending=!0,Object(l["a"])({sid:"925024",data:{canFinishOrder:this.info.canFinishOrder,taxWaybillId:this.taxWaybillId,receiptUrls:this.receiptUrls,locationInfo:e},encrypt:"0"}).then((function(t){i.isSending=!1,"0"===t.data.reCode?i.jumpPage(t.data.result):"10004"===t.data.reCode&&i.$dialog.alert({title:"提示",message:"该运单已删除，请返回查看其它运单"}).then((function(){Object(c["t"])(),Object(c["d"])()}))})).catch((function(){i.isSending=!1}))}},jumpPage:function(t){t&&"1"===t.isFreshClient?(console.log("刷新待收款和未到货"),Object(c["r"])()):0!==this.receiptUrls.length&&this.hasNoHd&&(console.log("刷新待收款"),Object(c["t"])()),Object(o["h"])("/transport_completed?tax_waybill_id=".concat(this.taxWaybillId,"&has_receipt=").concat(0===this.receiptUrls.length?0:1,"&from_type=").concat(this.fromType),this)},init:function(){var t=this;this.$toast.loading({message:"加载中"}),Object(l["a"])({sid:"925023",data:{imageType:"2",taxWaybillId:this.taxWaybillId,fromType:this.fromType},encrypt:"0"}).then((function(i){if("0"===i.data.reCode){var e=i.data.result;t.showGuide=e.showGuide,t.info=i.data.result;var n=e.hd||[];n&&0!==n.length||(t.hasNoHd=!0);for(var a=0;a<n.length;a++)t.receiptUrls.push(n[a].origPath);t.copyReceiptUrls=t.receiptUrls.concat()}})).catch((function(){t.errFlag||(t.errFlag=!0,t.init())}))}},created:function(){this.oldVersion284||Object(c["h"])({tip:"您的定位服务未开启，请前往开启"}),this.init(),window.AppJSApi_BackAppPhotoJson=this.receviveImgJson,window.AppJSApi_BackAppNewLocation=this.backAppNewLocation,window.AppJSApi_BackAppLocation=this.sendAction,window.AppJSApi_BackLocationFailed=this.locationFail,window.AppJSApi_InitSendFlag=this.locationFail}},p=r,h=(e("e5c8"),e("2877")),d=Object(h["a"])(p,n,a,!1,null,"3f225aa6",null);i["default"]=d.exports},e5c8:function(t,i,e){"use strict";var n=e("6bd1"),a=e.n(n);a.a}}]);